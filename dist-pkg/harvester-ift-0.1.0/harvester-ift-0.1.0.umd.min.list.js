(("undefined"!==typeof self?self:this)["webpackJsonpharvester_ift_0_1_0"]=("undefined"!==typeof self?self:this)["webpackJsonpharvester_ift_0_1_0"]||[]).push([[9],{"0a23":function(e,t,a){var s=a("a514");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("1bf445d5",s,!0,{sourceMap:!1,shadowMode:!1})},"0ed6":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".state[data-v-21cf3140]{display:flex;justify-content:space-between}.state .icon-warning[data-v-21cf3140]{margin-top:2px}",""]),e.exports=t},2583:function(e,t,a){var s=a("ef4a");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("50ede3ca",s,!0,{sourceMap:!1,shadowMode:!1})},"2c50":function(e,t,a){"use strict";a("0a23")},"2c7c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("span",[t("HarvesterMigrationState",{directives:[{name:"show",rawName:"v-show",value:e.isMigrating,expression:"isMigrating"}],attrs:{"vm-resource":e.row},on:{"state-changed":e.migrationStateChanged}}),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isMigrating,expression:"!isMigrating"}],staticClass:"state"},[t("VMState",{attrs:{row:e.row}}),e.warningMessage.length?t("v-popover",{attrs:{trigger:"hover",offset:"16"}},[t("span",{staticClass:"tooltip-target"},[t("i",{staticClass:"icon icon-warning icon-lg text-warning"})]),t("template",{slot:"popover"},e._l(e.warningMessage,(function(a,s){return t("p",{key:a},[e._v(" "+e._s(s+1)+". "+e._s(a)+" ")])})),0)],2):e._e()],1)],1)},r=[],o=a("7b24"),i=a("986d"),n={components:{VMState:o["a"],HarvesterMigrationState:i["default"]},props:{value:{type:String,default:""},row:{type:Object,required:!0},allNodeNetwork:{type:Array,default:()=>[]},allClusterNetwork:{type:Array,default:()=>[]}},data(){return{isMigrating:!1}},computed:{warningMessage(){var e,t,a,s;const r=[];if(null!==(e=this.row.warningMessage)&&void 0!==e&&e.pod){var o,i;const e=this.row.warningMessage.pod;var n;if(null!==(o=e.metadata)&&void 0!==o&&null!==(o=o.state)&&void 0!==o&&o.error&&!/pod has unbound immediate PersistentVolumeClaims/.test(null===(i=e.metadata)||void 0===i||null===(i=i.state)||void 0===i?void 0:i.message))r.push(null===(n=e.metadata)||void 0===n||null===(n=n.state)||void 0===n?void 0:n.message)}var l,c;"VM error"===(null===(t=this.row)||void 0===t?void 0:t.actualState)&&null!==(a=this.row.warningMessage)&&void 0!==a&&a.message&&r.push(null===(l=this.row.warningMessage)||void 0===l?void 0:l.message);null!==(s=this.row)&&void 0!==s&&s.migrationMessage&&r.push(null===(c=this.row)||void 0===c?void 0:c.migrationMessage.message);return r}},methods:{migrationStateChanged(e){this.isMigrating="Failed"!==e&&!!e}}},l=n,c=(a("65bb"),a("d802")),d=Object(c["a"])(l,s,r,!1,null,"21cf3140",null);t["default"]=d.exports},"4d0b":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".filter[data-v-738c6dea]{display:inline-block}.filter .banner-item[data-v-738c6dea]{display:inline-block;font-size:16px;margin-right:10px;padding:6px;border-radius:2px}.filter .banner-item i[data-v-738c6dea]{cursor:pointer;vertical-align:middle}.filter-popup[data-v-738c6dea]{width:600px}[data-v-738c6dea] .box{display:grid;grid-template-columns:40% 40% 10%;-moz-column-gap:1.75%;column-gap:1.75%;margin-bottom:10px}.required[data-v-738c6dea]{color:var(--error)}",""]),e.exports=t},"60aa":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".badge-state[data-v-5ceec65a]{padding:5px 10px;border:1px solid transparent;border-radius:20px}.badge-state.bg-info[data-v-5ceec65a]{border-color:var(--primary)}.badge-state.bg-error[data-v-5ceec65a]{border-color:var(--error)}.badge-state.bg-warning[data-v-5ceec65a]{border-color:var(--warning)}.badge-state.bg-success[data-v-5ceec65a]{color:var(--success);border-color:var(--success);background:transparent}.sortable-table TD .badge-state[data-v-5ceec65a]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;word-wrap:break-word;display:inline-block;max-width:100%;position:relative;padding:2px 10px 1px 10px;font-size:1em;max-width:200px;font-size:.85em;vertical-align:middle}",""]),e.exports=t},"60e1":function(e,t,a){"use strict";a("ad3d")},"65bb":function(e,t,a){"use strict";a("b1bd")},"6d1e":function(e,t,a){var s=a("bb25");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("3bc4a900",s,!0,{sourceMap:!1,shadowMode:!1})},"70b3":function(e,t,a){"use strict";a("853d")},"72ad":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,groupable:!0,"default-sort-by":"age",namespaced:!0,rows:e.rows,schema:e.schema,"key-field":"_key"},scopedSlots:e._u([{key:"cell:state",fn:function(e){return[t("div",{staticClass:"state"},[t("HarvesterVolumeState",{staticClass:"vmstate",attrs:{row:e.row}})],1)]}},{key:"cell:AttachedVM",fn:function(a){return[t("div",[e.getVMName(a.row)?t("n-link",{attrs:{to:e.goTo(a.row)}},[e._v(" "+e._s(e.getVMName(a.row))+" ")]):e._e()],1)]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))},r=[],o=a("15ca"),i=a("126f"),n=a("c3df"),l=a("873f"),c=a("a8b9"),d=a("907c"),u=a("90cd"),p=a("462f");const h={id:u["a"].VOLUME,type:d["A"],attributes:{kind:u["a"].VOLUME,namespaced:!0},metadata:{name:u["a"].VOLUME}};var m={name:"HarvesterListVolume",components:{Loading:o["a"],ResourceTable:i["a"],HarvesterVolumeState:n["default"]},async fetch(){const e={pvcs:this.$store.dispatch(u["b"]+"/findAll",{type:d["x"]}),pvs:this.$store.dispatch(u["b"]+"/findAll",{type:d["w"]}),vms:this.$store.dispatch(u["b"]+"/findAll",{type:u["a"].VM}),longhornVolumes:this.$store.dispatch(u["b"]+"/findAll",{type:d["l"].VOLUMES})},t=this.$store.getters[u["b"]+"/schemaFor"](u["c"]);t&&(e.snapshots=this.$store.dispatch(u["b"]+"/findAll",{type:u["c"]}));const a=await Object(c["a"])(e),s=this.$store.getters[u["b"]+"/schemaFor"](d["x"]);null!==s&&void 0!==s&&s.collectionMethods.find(e=>"post"===e.toLowerCase())||this.$store.dispatch("type-map/configureType",{match:u["a"].VOLUME,isCreatable:!1}),this.rows=a.pvcs.filter(e=>{var t;let a="";var s;null!==e&&void 0!==e&&null!==(t=e.metadata)&&void 0!==t&&null!==(t=t.annotations)&&void 0!==t&&t[l["a"].VOLUME_VM]&&(a=JSON.parse(null===e||void 0===e||null===(s=e.metadata)||void 0===s||null===(s=s.annotations)||void 0===s?void 0:s[l["a"].VOLUME_VM]).type);return"disk"===a||"image"===a})},data(){return{rows:[]}},computed:{schema(){return h},headers(){return[p["J"],p["t"],p["u"],{name:"size",labelKey:"tableHeaders.size",value:"spec.resources.requests.storage",sort:"volumeSort",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"AttachedVM",labelKey:"tableHeaders.attachedVM",type:"attached",value:"spec.claimRef",sort:"name"},{...p["J"],name:"phase",labelKey:"tableHeaders.phase",formatterOpts:{arbitrary:!0},value:"phaseState"},p["b"]]}},methods:{goTo(e){var t;return null===e||void 0===e||null===(t=e.attachVM)||void 0===t?void 0:t.detailLocation},getVMName(e){var t;return(null===(t=e.attachVM)||void 0===t||null===(t=t.metadata)||void 0===t?void 0:t.name)||""}},typeDisplay(){return this.$store.getters["type-map/labelFor"](h,99)}},f=m,v=(a("2c50"),a("d802")),b=Object(v["a"])(f,s,r,!1,null,"942f4e64",null);t["default"]=b.exports},"73e2":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"overview-web-console"},[t("ButtonDropdown",{attrs:{disabled:e.isOff,"no-drop":e.isOff,"button-label":"Console","dropdown-options":e.options,size:"sm"},on:{"click-action":e.handleDropdown}})],1)},r=[],o=a("4975"),i=a("4aac"),n=a("9ce4"),l=a("44f6"),c={name:"VMConsoleBar",components:{ButtonDropdown:o["a"]},props:{resource:{type:Object,required:!0,default:()=>({})}},computed:{...Object(n["a"])({t:"i18n/t"}),isOff(){return this.resource.stateDisplay===l["OFF"]},options(){return[{label:this.t("harvester.virtualMachine.console.novnc"),value:"vnc"},{label:this.t("harvester.virtualMachine.console.serial"),value:"serial"}]}},methods:{handleDropdown(e){this.show(e.value)},show(e){var t,a;let s=null===(t=this.resource.metadata)||void 0===t||null===(t=t.ownerReferences)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.uid;void 0===s&&(s=this.resource.metadata.uid);const r=window.location.host,o=window.location.pathname.replace(this.$route.path,""),n=null===(a=this.$route)||void 0===a?void 0:a.params,l=`https://${r}${o}/${i["PRODUCT_NAME"]}/c/${n.cluster}/console/${s}/${e}`;window.open(l,"_blank","toolbars=0,width=900,height=700,left=0,top=0,noreferrer")},isEmpty(e){return void 0!==e&&0===Object.keys(e).length}}},d=c,u=(a("7ba8"),a("d802")),p=Object(u["a"])(d,s,r,!1,null,null,null);t["a"]=p.exports},"7ba8":function(e,t,a){"use strict";a("2583")},"853d":function(e,t,a){var s=a("60aa");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("62a8e292",s,!0,{sourceMap:!1,shadowMode:!1})},"86aa":function(e,t,a){"use strict";a("d143")},"8c71":function(e,t,a){var s=a("a0de");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("4d383194",s,!0,{sourceMap:!1,shadowMode:!1})},"8c8c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,"default-sort-by":"age",rows:e.rows,schema:e.schema,groupable:!0,"key-field":"_key"}},"ResourceTable",e.$attrs,!1),e.$listeners))],1)},r=[],o=a("90cd"),i=a("126f"),n=a("a8b9"),l=a("15ca"),c=a("462f"),d=a("c97e"),u={name:"HarvesterListKeyPair",components:{Loading:l["a"],ResourceTable:i["a"]},async fetch(){const e={key:this.$store.dispatch(o["b"]+"/findAll",{type:o["a"].SSH})},t=await Object(n["a"])(e);this.allKeyPair=t.key},data(){return{allKeyPair:[],schema:this.$store.getters[o["b"]+"/schemaFor"](o["a"].SSH)}},computed:{headers(){return[c["J"],{...c["t"],width:300},c["u"],d["a"],{...c["b"],sort:"metadata.creationTimestamp:desc"}]},rows(){return this.allKeyPair}}},p=u,h=a("d802"),m=Object(h["a"])(p,s,r,!1,null,"30430ecb",null);t["default"]=m.exports},"8cd4":function(e,t,a){"use strict";a("8c71")},"984b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,"default-sort-by":"age",rows:e.rows,schema:e.schema,groupable:!0,"key-field":"_key"},scopedSlots:e._u([{key:"cell:state",fn:function(a){return[t("div",{staticClass:"state"},[t("HarvesterVmState",{staticClass:"vmstate",attrs:{row:a.row,"all-node-network":e.allNodeNetworks,"all-cluster-network":e.allClusterNetworks}})],1)]}},{key:"cell:name",fn:function(a){return[t("div",{staticClass:"name-console"},[a.row.type!==e.HCI.VMI?t("LinkDetail",{attrs:{row:a.row},model:{value:a.row.metadata.name,callback:function(t){e.$set(a.row.metadata,"name",t)},expression:"scope.row.metadata.name"}}):t("span",[e._v(" "+e._s(a.row.metadata.name)+" ")]),t("ConsoleBar",{staticClass:"console mr-10",attrs:{resource:a.row}})],1)]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))],1)},r=[],o=a("73e2"),i=a("126f"),n=a("9792"),l=a("2c7c"),c=a("462f"),d=a("907c"),u=a("90cd"),p=a("a8b9"),h=a("15ca"),m={name:"HarvesterListVM",components:{Loading:h["a"],HarvesterVmState:l["default"],LinkDetail:n["a"],ConsoleBar:o["a"],ResourceTable:i["a"]},props:{schema:{type:Object,required:!0}},async fetch(){const e={vms:this.$store.dispatch(u["b"]+"/findAll",{type:u["a"].VM}),pod:this.$store.dispatch(u["b"]+"/findAll",{type:d["u"]})};this.$store.getters[u["b"]+"/schemaFor"](d["s"])&&(e.nodes=this.$store.dispatch(u["b"]+"/findAll",{type:d["s"]}),this.hasNode=!0),this.$store.getters[u["b"]+"/schemaFor"](u["a"].NODE_NETWORK)&&(e.nodeNetworks=this.$store.dispatch(u["b"]+"/findAll",{type:u["a"].NODE_NETWORK})),this.$store.getters[u["b"]+"/schemaFor"](u["a"].CLUSTER_NETWORK)&&(e.clusterNetworks=this.$store.dispatch(u["b"]+"/findAll",{type:u["a"].CLUSTER_NETWORK}));const t=await Object(p["a"])(e);this.allVMs=t.vms,this.allNodeNetworks=t.nodeNetworks||[],this.allClusterNetworks=t.clusterNetworks||[]},data(){return{hasNode:!1,allVMs:[],allVMIs:[],allNodeNetworks:[],allClusterNetworks:[],HCI:u["a"]}},computed:{headers(){const e={name:"node",label:"Node",value:"id",sort:["realAttachNodeName"],formatter:"HarvesterNodeName",labelKey:"tableHeaders.node"},t=[c["J"],{...c["t"],width:300},c["u"],{name:"CPU",label:"CPU",sort:["spec.template.spec.domain.cpu.cores"],value:"spec.template.spec.domain.cpu.cores",align:"center",dashIfEmpty:!0},{name:"Memory",value:"displayMemory",sort:["memorySort"],align:"center",labelKey:"tableHeaders.memory",formatter:"Si",formatterOpts:{opts:{increment:1024,addSuffix:!0,maxExponent:3,minExponent:3,suffix:"i"},needParseSi:!0}},{name:"ip",label:"IP Address",value:"id",formatter:"HarvesterIpAddress",labelKey:"tableHeaders.ipAddress"},{...c["b"],sort:"metadata.creationTimestamp:desc"}];return this.hasNode&&t.splice(-1,0,e),t},rows(){const e=this.allVMIs.filter(e=>!this.allVMs.find(t=>t.id===e.id));return[...this.allVMs,...e]}},async created(){const e=await this.$store.dispatch(u["b"]+"/findAll",{type:u["a"].VMI});await this.$store.dispatch(u["b"]+"/findAll",{type:u["a"].VMIM}),this.$set(this,"allVMIs",e)}},f=m,v=(a("8cd4"),a("d802")),b=Object(v["a"])(f,s,r,!1,null,"90d311a8",null);t["default"]=b.exports},"986d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.state?t("div",[e.showSuccess?e._e():t("span",[e._v("/")]),t("BadgeState",{attrs:{label:e.vmiResource.migrationState.status,color:e.vmiResource.migrationStateBackground}})],1):e._e()},r=[],o=a("90cd"),i=a("f17a"),n={components:{BadgeState:i["a"]},props:{vmResource:{type:Object,required:!0},showSuccess:{type:Boolean,default:!0}},computed:{vmiResource(){const e=this.$store.getters[o["b"]+"/all"](o["a"].VMI)||[],t=e.find(e=>{var t,a;return(null===e||void 0===e||null===(t=e.metadata)||void 0===t||null===(t=t.ownerReferences)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.uid)===(null===(a=this.vmResource)||void 0===a||null===(a=a.metadata)||void 0===a?void 0:a.uid)});return t},state(){var e;return(null===(e=this.vmiResource)||void 0===e||null===(e=e.migrationState)||void 0===e?void 0:e.status)||""}},watch:{state(e){this.$emit("state-changed",e)}}},l=n,c=(a("70b3"),a("d802")),d=Object(c["a"])(l,s,r,!1,null,"5ceec65a",null);t["default"]=d.exports},"9a01":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("ResourceTable",{attrs:{headers:e.headers,schema:e.schema,rows:e.rows},scopedSlots:e._u([{key:"group-by",fn:function({group:a}){return[t("div",{directives:[{name:"trim-whitespace",rawName:"v-trim-whitespace"}],ref:a.key,staticClass:"group-tab"},[t("span",{domProps:{innerHTML:e._s(a.key)}})])]}},{key:"cell:claimed",fn:function({row:a}){return[a.isEnabled?t("span",[e._v(e._s(a.claimedBy))]):t("span",{staticClass:"text-muted"},[e._v("â€”")])]}}])})},r=[],o=a("126f"),i=a("90cd"),n=a("462f"),l={name:"ListPciDevices",components:{ResourceTable:o["a"]},props:{schema:{type:Object,required:!0},rows:{type:Array,required:!0},allgpu:{type:Array,required:!0},node:{type:Array,required:!0}},async fetch(){await this.$store.dispatch(i["b"]+"/findAll",{type:i["a"].PCI_CLAIM})},data(){const e=this.$store.getters["isSingleProduct"],t=[{...n["J"]},n["H"],{name:"description",labelKey:"tableHeaders.description",value:"id",formatter:"GpuDescription",sort:["status.description"]},{name:"node",labelKey:"tableHeaders.node",value:"status.nodeName",sort:["status.nodeName"]}];return e||t.push({name:"claimed",label:"Claimed By",value:"passthroughClaim.userName",sort:["passthroughClaim.userName"]}),{headers:t}},methods:{enableGroup(e=[]){const t=e[0].status.iommuGroup,a=this.filterByGroup(t),s=a[0];s&&s.enablePassthroughBulk(a)},disableGroup(e=[]){const t=e[0].status.iommuGroup,a=this.filterByGroup(t);a.forEach(e=>{e.passthroughClaim&&e.disablePassthrough()})},groupIsAllEnabled(e=[]){return!e.find(e=>!e.passthroughClaim)},filterByGroup(e){const t=[];this.node.forEach(e=>{"true"===e.metadata.labels["gpu.infortrend.com/vm-gpu-mode"]&&t.push(e.metadata.name)});const a=this.allgpu.filter(a=>"10de"===a.status.vendorId&&t.includes(a.status.nodeName)&&a.status.iommuGroup===e)||[];return a}}},c=l,d=a("d802"),u=Object(d["a"])(c,s,r,!1,null,null,null);t["a"]=u.exports},"9d0c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):e.hasSchema&&e.enabledPCI?t("DeviceList",{attrs:{allgpu:e.pciDevices,node:e.node,rows:e.rows,schema:e.schema}}):t("div",[t("Banner",{attrs:{color:"warning"}},[t("MessageLink",{attrs:{to:e.to,"prefix-label":"harvester.pci.goSetting.prefix","middle-label":"harvester.pci.goSetting.middle","suffix-label":"harvester.pci.goSetting.suffix"}})],1)],1)},r=[],o=a("907c"),i=a("a8b9"),n=a("eb32"),l=a("15ca"),c=a("79a8"),d=a("9a01"),u=a("90cd");const p={id:u["a"].PCI_DEVICE,type:o["A"],attributes:{kind:u["a"].PCI_DEVICE,namespaced:!1},metadata:{name:u["a"].PCI_DEVICE}};var h={name:"ListPciDevicePage",components:{Banner:n["a"],DeviceList:d["a"],Loading:l["a"],MessageLink:c["a"]},async fetch(){if(this.hasSchema=this.$store.getters[u["b"]+"/schemaFor"](u["a"].PCI_DEVICE),this.hasSchema)try{const e=await Object(i["a"])({pcidevice:this.$store.dispatch(u["b"]+"/findAll",{type:u["a"].PCI_DEVICE}),addons:this.$store.dispatch(u["b"]+"/findAll",{type:u["a"].ADD_ONS}),node:this.$store.dispatch(u["b"]+"/findAll",{type:"node"})}),t=await Object(i["a"])(e);this.node=t.node,this.pciDevices=t.pcidevice,this.enabledPCI=!0,this.$store.dispatch("type-map/configureType",{match:u["a"].PCI_DEVICE,isCreatable:this.enabledPCI})}catch(e){}},data(){return{enabledPCI:!1,hasSchema:!1,to:u["a"].ADD_ONS+"/harvester-system/pcidevices-controller?mode=edit",node:[],pciDevices:[]}},computed:{schema(){return p},filterByGroup(){const e={},t=[];this.pciDevices.forEach(t=>{"10de"===t.status.vendorId&&(e[t.status.iommuGroup]||(e[t.status.iommuGroup]=[]),e[t.status.iommuGroup].push(t))});for(const a in e){const s=e[a],r=s.reduce((e,t)=>t.status.address<e.status.address?t:e,s[0]);t.push(r)}return t},rows(){const e=[];this.node.forEach(t=>{"true"===t.metadata.labels["gpu.infortrend.com/vm-gpu-mode"]&&e.push(t.metadata.name)});const t=this.filterByGroup.filter(t=>e.includes(t.status.nodeName))||[];return t}},typeDisplay(){return this.$store.getters["type-map/labelFor"](p,99)}},m=h,f=a("d802"),v=Object(f["a"])(m,s,r,!1,null,null,null);t["default"]=v.exports},"9e33":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("Masthead",{attrs:{schema:null,resource:e.resource,"type-display":e.typeDisplay,"create-button-label":e.t("harvester.vmSnapshot.createText")}}),t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,groupable:!0,rows:e.filterdRows,schema:e.schema,"key-field":"_key","default-sort-by":"age"},scopedSlots:e._u([{key:"col:name",fn:function({row:a}){return[t("td",[t("span",[a.status&&a.status.source?t("n-link",{attrs:{to:a.detailLocation}},[e._v(" "+e._s(a.nameDisplay)+" ")]):t("span",[e._v(" "+e._s(a.nameDisplay)+" ")])],1)])]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))],1)},r=[],o=a("15ca"),i=a("9fd1"),n=a("126f"),l=a("90cd"),c=a("907c"),d=a("a8b9"),u=a("462f");const p={id:l["a"].VM_SNAPSHOT,type:c["A"],attributes:{kind:l["a"].VM_SNAPSHOT,namespaced:!0},metadata:{name:l["a"].VM_SNAPSHOT}};var h={name:"HarvesterListVMSnapshot",components:{ResourceTable:n["a"],Loading:o["a"],Masthead:i["a"]},async fetch(){const e=await Object(d["a"])({vms:this.$store.dispatch(l["b"]+"/findAll",{type:l["a"].VM}),rows:this.$store.dispatch("cluster/findAll",{type:l["a"].VM_SNAPSHOT})}),t=this.$store.getters["cluster/schemaFor"](l["a"].VM_SNAPSHOT);null!==t&&void 0!==t&&t.collectionMethods.find(e=>"post"===e.toLowerCase())||this.$store.dispatch("type-map/configureType",{match:l["a"].VM_SNAPSHOT,isCreatable:!1}),this.rows=e.rows},data(){const e={...this.$route.params},t=e.resource;return{rows:[],resource:t}},computed:{headers(){return[u["J"],u["t"],u["u"],{name:"targetVM",labelKey:"tableHeaders.targetVm",value:"attachVM",align:"left",formatter:"AttachVMWithName"},{name:"readyToUse",labelKey:"tableHeaders.readyToUse",value:"status.readyToUse",align:"left",formatter:"Checked"},u["b"]]},schema(){return p},typeDisplay(){return this.$store.getters["type-map/labelFor"](p,99)},filterdRows(){return this.rows.filter(e=>{var t;return"backup"!==(null===(t=e.spec)||void 0===t?void 0:t.type)})}}},m=h,f=a("d802"),v=Object(f["a"])(m,s,r,!1,null,null,null);t["default"]=v.exports},a0de:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".state[data-v-90d311a8]{display:flex}.state .vmstate[data-v-90d311a8]{margin-right:6px}.name-console[data-v-90d311a8]{display:flex;align-items:center;justify-content:space-between}.name-console span[data-v-90d311a8]{padding-right:4px;line-height:26px;white-space:nowrap}",""]),e.exports=t},a514:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".state[data-v-942f4e64]{display:flex}.state .vmstate[data-v-942f4e64]{margin-right:6px}",""]),e.exports=t},ad3d:function(e,t,a){var s=a("4d0b");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("bd59e274",s,!0,{sourceMap:!1,shadowMode:!1})},aedb:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[e.abnormalNetwork.length?e._l(e.abnormalNetwork,(function(a){return t("Banner",{key:a.name,attrs:{color:"error"}},[t("nuxt-link",{attrs:{to:a.to}},[e._v(" "+e._s(a.name)+": ")]),e._v(" "+e._s(a.message)+" ")],1)})):e._e(),t("ResourceTable",e._g(e._b({attrs:{headers:e.headers,"default-sort-by":"age",schema:e.schema,groupable:!0,rows:e.filterRows,"key-field":"_key"},scopedSlots:e._u([{key:"cell:state",fn:function({row:e}){return[t("div",{staticClass:"state"},[t("BadgeState",{attrs:{row:e}})],1)]}}])},"ResourceTable",e.$attrs,!1),e.$listeners))],2)},r=[],o=a("6418"),i=a("15ca"),n=a("126f"),l=a("7b24"),c=a("462f"),d=a("907c"),u=a("873f"),p=a("90cd"),h=a("a8b9");const m={id:p["a"].NETWORK_ATTACHMENT,type:d["A"],attributes:{kind:p["a"].NETWORK_ATTACHMENT,namespaced:!0},metadata:{name:p["a"].NETWORK_ATTACHMENT}};var f={name:"HarvesterListNetworks",components:{ResourceTable:n["a"],Banner:o["a"],Loading:i["a"],BadgeState:l["a"]},async fetch(){const e={rows:this.$store.dispatch(p["b"]+"/findAll",{type:d["q"]})};this.$store.getters[p["b"]+"/schemaFor"](p["a"].NODE_NETWORK)&&(e.hostNetworks=this.$store.dispatch(p["b"]+"/findAll",{type:p["a"].NODE_NETWORK})),this.$store.getters[p["b"]+"/schemaFor"](p["a"].CLUSTER_NETWORK)&&(e.clusterNetworks=this.$store.dispatch(p["b"]+"/findAll",{type:p["a"].CLUSTER_NETWORK}));const t=await Object(h["a"])(e);this.rows=t.rows,this.hostNetworks=t.hostNetworks||[]},data(){return{hash:{},rows:[],hosts:[],hostNetworks:[]}},computed:{headers(){return[c["J"],c["t"],c["u"],{name:"type",value:"vlanType",sort:"spec.config",labelKey:"tableHeaders.networkType"},{name:"AttachedVM",labelKey:"tableHeaders.attachedVM",type:"attached",sort:"name",formatter:"AttachedVM"},c["b"]]},schema(){return m},abnormalNetwork(){const e=this.hostNetworks.filter(e=>!e.isReady);return e.map(e=>e.linkMessage)},filterRows(){return this.rows.filter(e=>{var t;return!(null!==(t=e.metadata)&&void 0!==t&&null!==(t=t.annotations)&&void 0!==t&&t[u["a"].STORAGE_NETWORK])})}},typeDisplay(){return this.$store.getters["type-map/labelFor"](m,99)}},v=f,b=(a("86aa"),a("d802")),g=Object(b["a"])(v,s,r,!1,null,"1994116e",null);t["default"]=g.exports},af5c:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[e.uploadingImages.length>0?t("Banner",{attrs:{color:"warning",label:e.t("harvester.image.warning.uploading",{count:e.uploadingImages.length})}}):e._e(),t("ResourceTable",e._g(e._b({attrs:{rows:e.allImages,schema:e.schema,"sort-generation-fn":e.sortGenerationFn,"key-field":"_key"},scopedSlots:e._u([{key:"more-header-middle",fn:function(){return[t("FilterLabel",{ref:"filterLabel",attrs:{rows:e.rows},on:{changeRows:e.changeRows}})]},proxy:!0}])},"ResourceTable",e.$attrs,!1),e.$listeners))],1)},r=[],o=a("126f"),i=a("6418"),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"filter"},[e._l(e.searchLabels,(function(a,s){return[a.key?t("span",{key:`${a.key}${s}`,staticClass:"banner-item bg-warning"},[e._v(" "+e._s(a.key)+e._s(a.value?"=":"")+e._s(a.value)),t("i",{staticClass:"icon icon-close",on:{click:function(t){return e.remove(a)}}})]):e._e()]})),t("v-popover",{attrs:{trigger:"click",placement:"bottom-end"}},[e._t("header",(function(){return[t("button",{ref:"actionDropDown",staticClass:"btn bg-primary mr-10"},[e._t("title",(function(){return[e._v(" "+e._s(e.t("harvester.fields.filterLabels"))+" ")]}))],2)]})),t("template",{slot:"popover"},[t("div",{staticClass:"filter-popup"},[t("div",[t("ArrayList",{attrs:{"show-header":!0,"default-add-value":e.defaultAddValue,"initial-empty-row":!0},on:{input:e.filterRows},scopedSlots:e._u([{key:"column-headers",fn:function(){return[t("div",{staticClass:"box"},[t("div",{staticClass:"key"},[e._v(" "+e._s(e.t("generic.key"))+" "),t("span",{staticClass:"required"},[e._v("*")])]),t("div",{staticClass:"value"},[e._v(" "+e._s(e.t("generic.value"))+" ")]),t("div")])]},proxy:!0},{key:"columns",fn:function(a){return[t("div",{staticClass:"key"},[t("Select",{key:"label",ref:"select",attrs:{"append-to-body":!1,searchable:!0,options:e.optionLabels},on:{input:e.filterRows},model:{value:a.row.value.key,callback:function(t){e.$set(a.row.value,"key",t)},expression:"scope.row.value.key"}})],1),t("div",{staticClass:"value"},[e.calcValueOptions(a.row.value.key).length>0?t("Select",{key:"value",ref:"select",attrs:{"append-to-body":!1,searchable:!0,options:e.calcValueOptions(a.row.value.key)},on:{input:e.filterRows},model:{value:a.row.value.value,callback:function(t){e.$set(a.row.value,"value",t)},expression:"scope.row.value.value"}}):t("LabeledInput",{on:{input:e.filterRows},model:{value:a.row.value.value,callback:function(t){e.$set(a.row.value,"value",t)},expression:"scope.row.value.value"}})],1)]}},{key:"add",fn:function({add:a}){return[t("div",[t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button","data-testid":"add-item"},on:{click:function(e){return a()}}},[e._v(" "+e._s(e.t("generic.add"))+" ")]),t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button","data-testid":"remove-all-item"},on:{click:function(t){return e.removeAll()}}},[e._v(" "+e._s(e.t("generic.clearAll"))+" ")])])]}}]),model:{value:e.searchLabels,callback:function(t){e.searchLabels=t},expression:"searchLabels"}})],1)])])],2)],2)},l=[],c=a("977f"),d=a("47ab"),u=a("e26b"),p={name:"HarvesterFilterLabel",components:{Select:d["a"],ArrayList:c["a"],LabeledInput:u["a"]},props:{rows:{type:Array,required:!0}},data(){return{searchLabels:[],defaultAddValue:{key:"",value:""}}},computed:{optionLabels(){const e=this.rows.map(e=>Object.keys(e.labels));return Array.from(new Set(e.flat()))}},methods:{calcValueOptions(e){const t=[];return this.rows.map(a=>{const s=t.find(t=>t.label===a.labels[e]);Object.keys(a.labels).includes(e)&&e&&a.labels[e]&&!s&&t.push({value:a.labels[e],label:a.labels[e]})}),t},removeAll(){this.$set(this,"searchLabels",[]),this.filterRows()},remove(e){this.searchLabels.find((t,a)=>{if(t.key===e.key&&t.value===e.value)return this.searchLabels.splice(a,1),this.filterRows(),!0})},filterRows(){const e=this.rows.filter(e=>{const t=this.searchLabels.find(e=>e.key);if(!t)return this.rows;const a=e.labels,s=Object.keys(a);return this.searchLabels.find(e=>!(!e.key||!s.includes(e.key))&&(!e.value||(e.value===a[e.key]||e.value===a[e.key]&&void 0)))});this.$emit("changeRows",e,this.searchLabels)}},watch:{rows:{deep:!0,immediate:!0,handler(){this.filterRows()}}}},h=p,m=(a("60e1"),a("d802")),f=Object(m["a"])(h,n,l,!1,null,"738c6dea",null),v=f.exports,b=a("a8b9"),g=a("90cd"),w={name:"ListHarvesterImage",components:{ResourceTable:o["a"],Banner:i["a"],FilterLabel:v},async fetch(){const e={image:this.$store.dispatch(g["b"]+"/findAll",{type:g["a"].IMAGE})},t=await Object(b["a"])(e);this.allImages=t.image},props:{schema:{type:Object,required:!0},rows:{type:Array,required:!0}},data(){return{searchLabels:[],filterRows:[],allImages:[]}},computed:{uploadingImages(){return this.$store.getters["cluster-common/uploadingImages"]||[]}},methods:{changeRows(e,t){this.$set(this,"filterRows",e),this.$set(this,"searchLabels",t)},sortGenerationFn(){let e=Object(o["b"])(this.schema,this.$store);return this.searchLabels.map(t=>{e+=t.key,e+=t.value}),e}}},y=w,_=Object(m["a"])(y,s,r,!1,null,null,null);t["default"]=_.exports},b1bd:function(e,t,a){var s=a("0ed6");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("66aca528",s,!0,{sourceMap:!1,shadowMode:!1})},bb25:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".state[data-v-bc47731e]{display:flex;justify-content:space-between}.state .icon-warning[data-v-bc47731e]{margin-top:2px}.warning-message[data-v-bc47731e]:first-letter{text-transform:uppercase}",""]),e.exports=t},c3df:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("span",[t("div",{staticClass:"state"},[t("VolumeState",{attrs:{row:e.row}}),e.warningMessage?t("v-popover",{attrs:{trigger:"hover",offset:"16"}},[t("span",{staticClass:"tooltip-target"},[t("i",{staticClass:"icon icon-warning icon-lg text-warning"})]),t("template",{slot:"popover"},[t("p",{staticClass:"warning-message"},[e._v(" "+e._s(e.warningMessage)+" ")])])],2):e._e()],1)])},r=[],o=a("873f"),i=a("7b24"),n={components:{VolumeState:i["a"]},props:{row:{type:Object,required:!0}},computed:{warningMessage(){var e;return null===(e=this.row.relatedPV)||void 0===e||null===(e=e.metadata)||void 0===e||null===(e=e.annotations)||void 0===e?void 0:e[o["a"].VOLUME_ERROR]}}},l=n,c=(a("fd85"),a("d802")),d=Object(c["a"])(l,s,r,!1,null,"bc47731e",null);t["default"]=d.exports},ca3c:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".state[data-v-1994116e]{display:flex;justify-content:space-between}.state .icon-warning[data-v-1994116e]{margin-top:2px}",""]),e.exports=t},d143:function(e,t,a){var s=a("ca3c");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("0ed3").default;r("0fcdf4bd",s,!0,{sourceMap:!1,shadowMode:!1})},ef4a:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".overview-web-console .btn{line-height:24px;min-height:24px}",""]),e.exports=t},fd85:function(e,t,a){"use strict";a("6d1e")}}]);
//# sourceMappingURL=harvester-ift-0.1.0.umd.min.list.js.map