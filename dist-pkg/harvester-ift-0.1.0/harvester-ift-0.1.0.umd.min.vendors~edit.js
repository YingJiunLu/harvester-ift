(("undefined"!==typeof self?self:this)["webpackJsonpharvester_ift_0_1_0"]=("undefined"!==typeof self?self:this)["webpackJsonpharvester_ift_0_1_0"]||[]).push([[11],{"00c1":function(e,t,a){"use strict";a("4e3f")},"0340":function(e,t,a){var s=a("6b8f"),i=a("a67c"),n=Array.prototype,o=n.splice;function r(e,t){var a=e?t.length:0,n=a-1;while(a--){var r=t[a];if(a==n||r!==l){var l=r;i(r)?o.call(e,r,1):s(e,r)}}return e}e.exports=r},"0838":function(e,t,a){"use strict";a("a4f9")},"21a1":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".operator .vs__dropdown-option[data-v-3512fedb]{padding:3px 6px 3px 6px!important}.remove-expression[data-v-3512fedb]{padding:8px;position:absolute;margin-bottom:10px;right:0;top:0;z-index:2}.remove-expression i[data-v-3512fedb]{font-size:2em}.remove-container[data-v-3512fedb]{display:flex;justify-content:center}.match-expression-header[data-v-3512fedb],.match-expression-row[data-v-3512fedb]{display:grid;grid-template-columns:1fr 1fr 1fr;margin:5px 0;grid-gap:1.75%}.match-expression-header>LABEL[data-v-3512fedb],.match-expression-row>LABEL[data-v-3512fedb]{margin:0}.match-expression-header[data-v-3512fedb]:not(.view),.match-expression-row[data-v-3512fedb]:not(.view){grid-template-columns:repeat(3,1fr) 50px}.match-expression-row>div>input[data-v-3512fedb]{min-height:40px!important}.match-expression-header-matching[data-v-3512fedb],.match-expression-row-matching[data-v-3512fedb]{grid-template-columns:1fr 1fr 1fr 1fr}.match-expression-header-matching[data-v-3512fedb]:not(.view),.match-expression-row-matching[data-v-3512fedb]:not(.view){grid-template-columns:1fr 1fr 1fr 1fr 100px}",""]),e.exports=t},2230:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".cru-resource-footer{display:flex;justify-content:flex-end;margin-top:20px}.cru-resource-footer .btn{margin-left:20px}",""]),e.exports=t},"25b9":function(e,t,a){"use strict";a("b8a9")},"2bfc":function(e,t,a){"use strict";var s=a("9ce4"),i=a("a8b9");t["a"]={computed:{...Object(s["a"])(["currentCluster"])},data(){return{isLoadingSecondaryResources:!1}},methods:{async resourceManagerFetchSecondaryResources(e,t=!1){const a={},s=e.namespace;if(Object.keys(e.data).forEach(e=>{const i=this.$store.getters["cluster/schemaFor"](e);if(i){var n;let o=i.links.collection;if(null!==i&&void 0!==i&&null!==(n=i.attributes)&&void 0!==n&&n.namespaced&&s)o=`${o}/${s}`;else if(t)return;a[e]=this.$store.dispatch("cluster/request",{url:o})}}),Object.keys(a).length){this.isLoadingSecondaryResources=!0;const t=await Object(i["b"])(a),s=Object.keys(t);for(let a=0;a<s.length;a++){var n;const i=s[a],o=t[i].status,r=t[i].value.items||t[i].value.data||t[i].value;if("fulfilled"===o&&e.data[i]&&null!==(n=e.data[i].applyTo)&&void 0!==n&&n.length)for(let t=0;t<e.data[i].applyTo.length;t++){const a=e.data[i].applyTo[t];let s=r;a.classify&&(s=await this.$store.dispatch("cluster/createMany",r)),a.parsingFunc?this[a.var]=a.parsingFunc(s):this[a.var]=s}else"rejected"===o&&console.error(`Resource Manager - secondary data request for type ${i} has failed`,o.error)}this.isLoadingSecondaryResources=!1}},resourceManagerClearSecondaryResources(e,t=!1){Object.keys(e.data).forEach(a=>{const s=this.$store.getters["cluster/schemaFor"](a);if(s){var i;if((null===s||void 0===s||null===(i=s.attributes)||void 0===i||!i.namespaced)&&t)return;for(let t=0;t<e.data[a].applyTo.length;t++){const s=e.data[a].applyTo[t];this[s.var]=[]}}})}}}},"2e57":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row mb-20"},[t("RadioGroup",{attrs:{name:"selectNode",options:e.selectNodeOptions,mode:e.mode},on:{input:e.update},model:{value:e.selectNode,callback:function(t){e.selectNode=t},expression:"selectNode"}})],1),"nodeSelector"===e.selectNode?[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-6"},[t("LabeledSelect",{attrs:{label:e.t("workload.scheduling.affinity.nodeName"),options:e.nodes||[],mode:e.mode,multiple:!1,loading:e.loading},on:{input:e.update},model:{value:e.nodeName,callback:function(t){e.nodeName=t},expression:"nodeName"}})],1)])]:"affinity"===e.selectNode?[t("NodeAffinity",{attrs:{mode:e.mode},on:{input:e.update},model:{value:e.nodeAffinity,callback:function(t){e.nodeAffinity=t},expression:"nodeAffinity"}})]:e._e()],2)},i=[],n=a("9ce4"),o=a("e143"),r=a("466b"),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row",on:{input:e.queueUpdate}},[t("div",{staticClass:"col span-12"},[t("ArrayListGrouped",{staticClass:"mt-20",attrs:{mode:e.mode,"default-add-value":{matchExpressions:[]},"add-label":e.t("workload.scheduling.affinity.addNodeSelector")},on:{remove:e.remove},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"row"},[t("div",{staticClass:"col span-9"},[t("LabeledSelect",{attrs:{options:e.affinityOptions,value:e.priorityDisplay(a.row.value),label:e.t("workload.scheduling.affinity.priority"),mode:e.mode,"data-testid":"node-affinity-priority-index"+a.i},on:{input:function(t){e.changePriority(a.row.value)}}})],1),"weight"in a.row.value?t("div",{staticClass:"col span-3"},[t("LabeledInput",{attrs:{mode:e.mode,type:"number",min:"1",max:"100",label:e.t("workload.scheduling.affinity.weight.label"),placeholder:e.t("workload.scheduling.affinity.weight.placeholder"),"data-testid":"node-affinity-weight-index"+a.i},model:{value:a.row.value.weight,callback:function(t){e.$set(a.row.value,"weight",e._n(t))},expression:"props.row.value.weight"}})],1):e._e()]),t("MatchExpressions",{key:e.rerenderNums,staticClass:"col span-12 mt-20",attrs:{value:e.matchingSelectorDisplay?a.row.value:a.row.value.matchExpressions,"matching-selector-display":e.matchingSelectorDisplay,mode:e.mode,type:e.node,"show-remove":!1,"data-testid":"node-affinity-expressions-index"+a.i},on:{input:function(t){e.updateExpressions(a.row.value,t)}}})]}}]),model:{value:e.allSelectorTerms,callback:function(t){e.allSelectorTerms=t},expression:"allSelectorTerms"}})],1)])},c=[],d=a("44db"),u=a.n(d),p=a("da25"),h=a("e24b"),m=a("907c"),f=function(){var e=this,t=e._self._c;return t("div",[e.showRemove&&!e.isView?t("button",{staticClass:"btn role-link remove-expression",attrs:{type:"button"},on:{click:function(t){return e.$emit("remove")}}},[t("i",{staticClass:"icon icon-x"})]):e._e(),e.rules.length?t("div",{staticClass:"match-expression-header",class:{view:e.isView,"match-expression-header-matching":e.matchingSelectorDisplay}},[e.matchingSelectorDisplay?t("label",[e._v(" "+e._s(e.t("workload.scheduling.affinity.matchExpressions.matchType"))+" ")]):e._e(),t("label",[e._v(" "+e._s(e.t("workload.scheduling.affinity.matchExpressions.key"))+" ")]),t("label",[e._v(" "+e._s(e.t("workload.scheduling.affinity.matchExpressions.operator"))+" ")]),t("label",[e._v(" "+e._s(e.t("workload.scheduling.affinity.matchExpressions.value"))+" ")]),t("span")]):e._e(),e._l(e.rules,(function(a,s){return t("div",{key:a.id,staticClass:"match-expression-row",class:{view:e.isView,"mb-10":s!==e.rules.length-1,"match-expression-row-matching":e.matchingSelectorDisplay}},[e.matchingSelectorDisplay?t("div",{attrs:{"data-testid":"input-match-type-field-"+s}},[e.isView?t("div",[e._v(" "+e._s(a.matching)+" ")]):t("LabeledSelect",{attrs:{mode:e.mode,options:e.matchingSelectOptions,"data-testid":"input-match-type-field-control-"+s},on:{selecting:e.update},model:{value:a.matching,callback:function(t){e.$set(a,"matching",t)},expression:"row.matching"}})],1):e._e(),t("div",{attrs:{"data-testid":"input-match-expression-key-"+s}},[e.isView?t("div",[e._v(" "+e._s(a.key)+" ")]):e.hasKeySelectOptions?t("LabeledSelect",{attrs:{mode:e.mode,options:e.keysSelectOptions,"data-testid":"input-match-expression-key-control-select-"+s},model:{value:a.key,callback:function(t){e.$set(a,"key",t)},expression:"row.key"}}):t("input",{directives:[{name:"model",rawName:"v-model",value:a.key,expression:"row.key"}],attrs:{mode:e.mode,"data-testid":"input-match-expression-key-control-"+s},domProps:{value:a.key},on:{input:[function(t){t.target.composing||e.$set(a,"key",t.target.value)},e.update]}})],1),t("div",{attrs:{"data-testid":"input-match-expression-operator-"+s}},[e.isView?t("div",[e._v(" "+e._s(a.operator)+" ")]):t("Select",{staticClass:"operator single",attrs:{options:e.ops,clearable:!1,reduce:e=>e.value,mode:e.mode,"data-testid":"input-match-expression-operator-control-"+s},on:{input:e.update},model:{value:a.operator,callback:function(t){e.$set(a,"operator",t)},expression:"row.operator"}})],1),"Exists"===a.operator||"DoesNotExist"===a.operator?t("div",{staticClass:"no-value"},[t("label",{staticClass:"text-muted"},[e._v("…")])]):t("div",{attrs:{"data-testid":"input-match-expression-values-"+s}},[e.isView?t("div",[e._v(" "+e._s(a.values)+" ")]):t("input",{directives:[{name:"model",rawName:"v-model",value:a.values,expression:"row.values"}],attrs:{mode:e.mode,disabled:"Exists"===a.operator||"DoesNotExist"===a.operator,"data-testid":"input-match-expression-values-control-"+s},domProps:{value:a.values},on:{input:[function(t){t.target.composing||e.$set(a,"values",t.target.value)},e.update]}})]),e.showRemoveButton?t("div",{staticClass:"remove-container"},[e.isView?e._e():t("button",{staticClass:"btn role-link",style:{padding:"0px"},attrs:{type:"button",disabled:"view"===e.mode,"data-testid":"input-match-expression-remove-control-"+s},on:{click:function(t){return e.removeRule(a)}}},[t("t",{attrs:{k:"generic.remove"}})],1)]):e._e()])})),!e.isView&&e.showAddButton?t("div",{staticClass:"mt-20"},[t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button","data-testid":"input-match-expression-add-rule"},on:{click:e.addRule}},[t("t",{attrs:{k:"workload.scheduling.affinity.matchExpressions.addRule"}})],1)]):e._e()],2)},v=[],b=a("47ab"),y=a("bddd"),g=a("2879"),x={components:{Select:b["a"],LabeledSelect:r["a"]},props:{value:{type:[Array,Object],default:()=>[]},mode:{type:String,default:"edit"},type:{type:String,default:m["s"]},matchingSelectorDisplay:{type:Boolean,default:!1},initialEmptyRow:{type:Boolean,default:!1},showAddButton:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showRemove:{type:Boolean,default:!0},keysSelectOptions:{type:Array,default:()=>[]}},data(){const e=this.$store.getters["i18n/t"],t=[{label:e("workload.scheduling.affinity.matchExpressions.in"),value:"In"},{label:e("workload.scheduling.affinity.matchExpressions.notIn"),value:"NotIn"},{label:e("workload.scheduling.affinity.matchExpressions.exists"),value:"Exists"},{label:e("workload.scheduling.affinity.matchExpressions.doesNotExist"),value:"DoesNotExist"}],a=[{label:e("workload.scheduling.affinity.matchExpressions.in"),value:"In"},{label:e("workload.scheduling.affinity.matchExpressions.notIn"),value:"NotIn"},{label:e("workload.scheduling.affinity.matchExpressions.exists"),value:"Exists"},{label:e("workload.scheduling.affinity.matchExpressions.doesNotExist"),value:"DoesNotExist"},{label:e("workload.scheduling.affinity.matchExpressions.lessThan"),value:"Lt"},{label:e("workload.scheduling.affinity.matchExpressions.greaterThan"),value:"Gt"}],s=this.type===m["s"]?a:t;let i;if(this.matchingSelectorDisplay){const e={matchFields:[],matchExpressions:[]};["matchFields","matchExpressions"].forEach(t=>{e[t]=this.parseRules(this.value[t],t)}),i=[...e.matchFields,...e.matchExpressions]}else Object(y["g"])(this.value)?(i=[...this.value],i=this.parseRules(i)):(i=Object(g["a"])(this.value.matchLabels,this.value.matchExpressions),i=this.parseRules(i));if(!i.length&&this.initialEmptyRow&&!this.isView){const e={key:"",operator:"In",values:""};this.matchingSelectorDisplay&&(e.matching="matchExpressions"),i.push(e)}return{ops:s,rules:i,custom:[]}},computed:{isView(){return"view"===this.mode},node(){return m["s"]},pod(){return m["u"]},hasKeySelectOptions(){var e;return!(null===(e=this.keysSelectOptions)||void 0===e||!e.length)},matchingSelectOptions(){return[{label:this.t("workload.scheduling.affinity.matchExpressions.label"),value:"matchExpressions"},{label:this.t("workload.scheduling.affinity.matchFields.label"),value:"matchFields"}]},...Object(n["a"])({t:"i18n/t"})},methods:{parseRules(e,t){return null!==e&&void 0!==e&&e.length?e.map(e=>{const a=Object(h["e"])(e);return a.values&&"string"!==typeof a.values&&(a.values=a.values.join(", ")),t&&(a.matching=t),a}):[]},removeRule(e){Object(y["i"])(this.rules,e),this.update()},addRule(){const e={key:"",operator:"In",values:""};this.matchingSelectorDisplay&&(e.matching="matchExpressions"),this.rules.push(e)},update(){this.$nextTick(()=>{const e=this.rules.map(e=>{const t={key:e.key,operator:e.operator};this.matchingSelectorDisplay&&(t.matching=e.matching);let a=(e.values||"").trim();return"Exists"!==e.operator&&"DoesNotExist"!==e.operator||(a=null),null!==a&&(t.values=a.split(/\s*,\s*/)),t}).filter(e=>!!e);Object(y["g"])(this.value)||this.matchingSelectorDisplay?this.$emit("input",e):this.$emit("input",Object(g["c"])(e))})}}},w=x,k=(a("9838"),a("d802")),_=Object(k["a"])(w,f,v,!1,null,"3512fedb",null),S=_.exports,C=a("8e93"),N=a("2cb5"),$=function(){var e=this,t=e._self._c;return t("ArrayList",e._b({staticClass:"array-list-grouped",attrs:{"add-allowed":e.canAdd&&!e.isView,mode:e.mode,"initial-empty-row":e.initialEmptyRow},on:{input:function(t){return e.$emit("input",t)},add:function(t){return e.$emit("add")},remove:function(t){return e.$emit("remove",t)}},scopedSlots:e._u([{key:"columns",fn:function(a){return[t("InfoBox",[e._t("default",null,null,a)],2)]}},{key:"remove-button",fn:function(a){return[e.canRemoveRow(a.row,a.i)?t("button",{staticClass:"btn role-link close btn-sm",attrs:{type:"button","data-testid":"remove-item-"+a.i},on:{click:a.remove}},[t("i",{staticClass:"icon icon-x"})]):t("span")]}},e._l(e.$scopedSlots,(function(t,a){return{key:a,fn:function(t){return[e._t(a,null,null,t)]}}}))],null,!0)},"ArrayList",e.$attrs,!1))},O=[],B=a("977f"),T=a("13a9"),A={name:"ArrayListGrouped",components:{ArrayList:B["a"],InfoBox:T["a"]},props:{canRemove:{type:[Boolean,Function],default:!0},canAdd:{type:Boolean,default:!0},initialEmptyRow:{type:Boolean,default:!1},mode:{type:String,default:p["p"]}},computed:{isView(){return this.mode===p["w"]}},methods:{canRemoveRow(e,t){return!this.isView&&("function"===typeof this.canRemove?this.canRemove(e,t):this.canRemove)}}},E=A,j=(a("5841"),Object(k["a"])(E,$,O,!1,null,null,null)),R=j.exports,M={components:{ArrayListGrouped:R,MatchExpressions:S,LabeledSelect:r["a"],LabeledInput:C["a"]},props:{value:{type:Object,default:()=>({})},mode:{type:String,default:"create"},matchingSelectorDisplay:{type:Boolean,default:!1}},data(){if(this.value.required)return{nodeSelectorTerms:this.value.required.nodeSelectorTerms};{const{preferredDuringSchedulingIgnoredDuringExecution:e=[],requiredDuringSchedulingIgnoredDuringExecution:t={}}=this.value,{nodeSelectorTerms:a=[]}=t,s=[...e,...a].map(e=>{const t=Object(h["e"])(e);return t._id=Object(N["p"])(4),e.preference&&(Object.assign(t,e.preference),delete t.preference),t});return{allSelectorTerms:s,weightedNodeSelectorTerms:e,defaultWeight:1,rerenderNums:Object(N["p"])(4)}}},computed:{...Object(n["a"])({t:"i18n/t"}),isView(){return this.mode===p["w"]},hasWeighted(){return!!this.weightedNodeSelectorTerms},node(){return m["s"]},affinityOptions(){const e=[this.t("workload.scheduling.affinity.preferred"),this.t("workload.scheduling.affinity.required")];return e}},created(){this.queueUpdate=u()(this.update,500)},methods:{update(){const e={},t={nodeSelectorTerms:[]},a=[];this.allSelectorTerms.forEach(e=>{const s={...e};if(s.matchExpressions&&(s.matchExpressions=(s.matchExpressions||[]).map(e=>{const t={...e};return delete t.matching,t})),s.matchFields&&(s.matchFields=(s.matchFields||[]).map(e=>{const t={...e};return delete t.matching,t})),s.weight){const e={weight:s.weight,preference:s};delete e.preference.weight,a.push(e)}else t.nodeSelectorTerms.push(s)}),a.length&&(e.preferredDuringSchedulingIgnoredDuringExecution=a),t.nodeSelectorTerms.length&&(e.requiredDuringSchedulingIgnoredDuringExecution=t),this.$emit("input",e)},remove(){this.rerenderNums=Object(N["p"])(4),this.queueUpdate()},changePriority(e){e.weight?this.$delete(e,"weight"):this.$set(e,"weight",1),this.update()},priorityDisplay(e){return"weight"in e?this.t("workload.scheduling.affinity.preferred"):this.t("workload.scheduling.affinity.required")},updateExpressions(e,t){const a={matchFields:[],matchExpressions:[]};t.length&&(t.forEach(e=>{a[e.matching||"matchExpressions"].push(e)}),this.$set(e,"matchFields",a.matchFields),this.$set(e,"matchExpressions",a.matchExpressions),this.update())},get:h["g"],isEmpty:h["h"]}},L=M,F=Object(k["a"])(L,l,c,!1,null,null,null),D=F.exports;const P="harvester";var V=a("4ac6"),q={components:{RadioGroup:o["a"],LabeledSelect:r["a"],NodeAffinity:D},props:{value:{type:Object,default:()=>({})},nodes:{type:Array,default:()=>[]},mode:{type:String,default:"create"},loading:{default:!1,type:Boolean}},data(){var e;const t=this.$store.getters["currentProduct"].inStore===P;let{nodeName:a=""}=this.value;const{affinity:s={},nodeSelector:i={}}=this.value,{nodeAffinity:n={}}=s;let o=null;return this.value.nodeName?o="nodeSelector":t&&null!==(e=this.value)&&void 0!==e&&null!==(e=e.nodeSelector)&&void 0!==e&&e[V["g"]]?(o="nodeSelector",a=i[V["g"]]):Object(h["h"])(n)||(o="affinity"),n.requiredDuringSchedulingIgnoredDuringExecution||this.$set(n,"requiredDuringSchedulingIgnoredDuringExecution",{nodeSelectorTerms:[]}),n.preferredDuringSchedulingIgnoredDuringExecution||this.$set(n,"preferredDuringSchedulingIgnoredDuringExecution",[]),{selectNode:o,nodeName:a,nodeAffinity:n,nodeSelector:i}},computed:{...Object(n["a"])({t:"i18n/t"}),isView(){return this.mode===p["w"]},isHarvester(){return this.$store.getters["currentProduct"].inStore===P},selectNodeOptions(){const e=this.isHarvester?"harvester.virtualMachine":"workload",t=[{label:this.t(e+".scheduling.affinity.anyNode"),value:null},{label:this.t(e+".scheduling.affinity.specificNode"),value:"nodeSelector"},{label:this.t(e+".scheduling.affinity.schedulingRules"),value:"affinity"}];return t}},methods:{update(){var e,t;const{nodeName:a,nodeSelector:s,nodeAffinity:i}=this;switch(this.selectNode){case"nodeSelector":this.isHarvester?Object.assign(this.value,{nodeSelector:{[V["g"]]:a}}):Object.assign(this.value,{nodeSelector:s,nodeName:a}),null!==(e=this.value)&&void 0!==e&&null!==(e=e.affinity)&&void 0!==e&&e.nodeAffinity&&delete this.value.affinity.nodeAffinity;break;case"affinity":delete this.value.nodeName,delete this.value.nodeSelector,this.value.affinity?Object.assign(this.value.affinity,{nodeAffinity:i}):Object.assign(this.value,{affinity:{nodeAffinity:i}});break;default:delete this.value.nodeName,delete this.value.nodeSelector,null!==(t=this.value)&&void 0!==t&&null!==(t=t.affinity)&&void 0!==t&&t.nodeAffinity&&delete this.value.affinity.nodeAffinity}},isEmpty:h["h"]},watch:{"value.nodeSelector":{handler(e){if(this.isHarvester&&null!==e&&void 0!==e&&e[V["g"]]){this.selectNode="nodeSelector";const t=e[V["g"]];this.nodeName=t;const a=this.nodes.map(e=>e.value);t&&!a.includes(t)&&(this.$store.dispatch("growl/error",{title:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistNode.title",{name:t}),message:this.$store.getters["i18n/t"]("harvester.vmTemplate.tips.notExistNode.message")},{root:!0}),delete this.value.nodeSelector,this.$set(this,"nodeName",""),this.$set(this,"selectNode",null))}}}}},I=q,K=Object(k["a"])(I,s,i,!1,null,null,null);t["a"]=K.exports},3064:function(e,t,a){var s=a("b494");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("eeabd72c",s,!0,{sourceMap:!1,shadowMode:!1})},"3c8c":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row mb-20"},[e.namespaced&&!e.nameNsHidden&&e.createNamespace?t("div",{staticClass:"col span-3",attrs:{"data-testid":e.componentTestid+"-namespace-create"}},[t("LabeledInput",{ref:"namespace",attrs:{label:e.t("namespace.label"),placeholder:e.t("namespace.createNamespace"),disabled:e.namespaceReallyDisabled,mode:e.mode,"min-height":30,required:e.nameRequired,rules:e.rules.namespace},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}}),t("button",{attrs:{aria:"Cancel create"},on:{click:e.cancelCreateNamespace}},[t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("generic.cancel"),expression:"t('generic.cancel')"}],staticClass:"icon icon-close align-value"})])],1):e._e(),!e.namespaced||e.nameNsHidden||e.createNamespace?e._e():t("div",{staticClass:"col span-3",attrs:{"data-testid":e.componentTestid+"-namespace"}},[t("LabeledSelect",{directives:[{name:"show",rawName:"v-show",value:!e.createNamespace,expression:"!createNamespace"}],attrs:{clearable:!0,options:e.options,disabled:e.namespaceReallyDisabled,searchable:!0,mode:e.mode,multiple:!1,label:e.t("namespace.label"),placeholder:e.t("namespace.selectOrCreate"),rules:e.rules.namespace,required:""},on:{selecting:e.selectNamespace},model:{value:e.namespace,callback:function(t){e.namespace=t},expression:"namespace"}})],1),e.nameNsHidden?e._e():t("div",{staticClass:"col span-3",attrs:{"data-testid":e.componentTestid+"-name"}},[t("LabeledInput",{key:"name",ref:"name",attrs:{label:e.t(e.nameLabel),placeholder:e.t(e.namePlaceholder),disabled:e.nameReallyDisabled,mode:e.mode,"min-height":30,required:e.nameRequired,rules:e.rules.name},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.descriptionHidden,expression:"!descriptionHidden"}],class:["col",e.extraColumns.length>0?"span-3":"span-6"],attrs:{"data-testid":e.componentTestid+"-description"}},[t("LabeledInput",{key:"description",attrs:{mode:e.mode,disabled:e.descriptionDisabled,label:e.t(e.descriptionLabel),placeholder:e.t(e.descriptionPlaceholder),"min-height":30,rules:e.rules.description},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._l(e.extraColumns,(function(a){return t("div",{key:a,class:{col:!0,[e.colSpan]:!0}},[e._t(a)],2)})),e.showSpacer?t("div",{staticClass:"spacer"}):e._e()],2)},i=[],n=a("8bbf"),o=a.n(n),r=a("9ce4"),l=a("e24b"),c=a("1d19"),d=a("907c"),u=a("4ac6"),p=a("da25"),h=a("8e93"),m=a("466b");function f(e){return(e||"").trim().toLowerCase().replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}var v={name:"NameNsDescription",components:{LabeledInput:h["a"],LabeledSelect:m["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},nameNsHidden:{type:Boolean,default:!1},descriptionHidden:{type:Boolean,default:!1},extraColumns:{type:Array,default:()=>[]},nameLabel:{type:String,default:"nameNsDescription.name.label"},nameEditable:{type:Boolean,default:!1},namePlaceholder:{type:String,default:"nameNsDescription.name.placeholder"},nameDisabled:{type:Boolean,default:!1},nameRequired:{type:Boolean,default:!0},nameNormalized:{type:Boolean,default:!0},namespaced:{type:Boolean,default:!0},namespaceFilter:{type:Function,default:null},namespaceMapper:{type:Function,default:null},namespaceType:{type:String,default:d["p"]},namespaceLabel:{type:String,default:"nameNsDescription.namespace.label"},namespacePlaceholder:{type:String,default:"nameNsDescription.namespace.placeholder"},namespaceDisabled:{type:Boolean,default:!1},namespaceNewAllowed:{type:Boolean,default:!1},noDefaultNamespace:{type:Boolean,default:!1},namespacesOverride:{type:Array,default:null},namespaceOptions:{type:Array,default:null},createNamespaceOverride:{type:Boolean,default:!1},descriptionLabel:{type:String,default:"nameNsDescription.description.label"},descriptionPlaceholder:{type:String,default:"nameNsDescription.description.placeholder"},descriptionDisabled:{type:Boolean,default:!1},nameKey:{type:String,default:null},namespaceKey:{type:String,default:null},descriptionKey:{type:String,default:null},forceNamespace:{type:String,default:null},showSpacer:{type:Boolean,default:!0},horizontal:{type:Boolean,default:!0},rules:{default:()=>({namespace:[],name:[],description:[]}),type:Object},componentTestid:{type:String,default:"name-ns-description"}},data(){const e=this.value,t=e.metadata;let a,s,i;var n;(s=this.nameKey?Object(l["g"])(e,this.nameKey):null===t||void 0===t?void 0:t.name,this.namespaced&&(this.forceNamespace?(a=this.forceNamespace,this.updateNamespace(a)):a=this.namespaceKey?Object(l["g"])(e,this.namespaceKey):null===t||void 0===t?void 0:t.namespace,a||this.noDefaultNamespace||(a=this.$store.getters["defaultNamespace"],t&&(t.namespace=a))),this.descriptionKey)?i=Object(l["g"])(e,this.descriptionKey):i=null===t||void 0===t||null===(n=t.annotations)||void 0===n?void 0:n[u["e"]];const o=this.$store.getters["currentStore"](),r=this.$store.getters[o+"/schemaFor"](d["p"]);return{namespace:a,name:s,description:i,createNamespace:!1,nsSchema:r}},computed:{...Object(r["a"])(["currentProduct","currentCluster","namespaces","allowedNamespaces"]),namespaceReallyDisabled(){return!!this.forceNamespace||this.namespaceDisabled||this.mode===p["p"]},nameReallyDisabled(){return this.nameDisabled||this.mode===p["p"]&&!this.nameEditable},options(){let e;if(this.namespacesOverride)e=this.namespacesOverride;else if(this.namespaceOptions)e=(this.namespaceOptions.map(e=>e.name)||[]).sort();else{const t=this.isCreate?this.allowedNamespaces():this.namespaces();e=Object.keys(t)}const t=e.map(e=>({nameDisplay:e,id:e})).map(this.namespaceMapper||(e=>({label:e.nameDisplay,value:e.id}))),a=Object(c["a"])(t,"label");this.forceNamespace&&a.unshift({label:this.forceNamespace,value:this.forceNamespace});const s={label:this.t("namespace.createNamespace"),value:"",kind:"highlighted"},i={label:"divider",disabled:!0,kind:"divider"},n=this.canCreateNamespace||this.createNamespaceOverride?[s,i]:[];return[...n,...a]},isView(){return this.mode===p["w"]},isCreate(){return this.mode===p["n"]},colSpan(){if(!this.horizontal)return"span-8";let e=(this.nameNsHidden?0:2)+(this.descriptionHidden?0:1)+this.extraColumns.length;e=Math.max(2,e);const t=12/e;return"span-"+t},canCreateNamespace(){var e,t;return((null===(e=this.nsSchema)||void 0===e?void 0:e.collectionMethods)||[]).includes("POST")&&(null===(t=this.currentCluster)||void 0===t?void 0:t.canUpdate)}},watch:{name(e){this.normalizeName&&(e=f(e)),this.nameKey?Object(l["j"])(this.value,this.nameKey,e):this.$set(this.value.metadata,"name",e),this.$emit("change")},namespace(e){this.updateNamespace(e),this.$emit("change")},description(e){this.descriptionKey?Object(l["j"])(this.value,this.descriptionKey,e):this.value.setAnnotation(u["e"],e),this.$emit("change")}},mounted(){this.$nextTick(()=>{this.$refs.name&&this.$refs.name.focus()})},methods:{updateNamespace(e){this.forceNamespace&&(e=this.forceNamespace),this.namespaced&&this.$emit("isNamespaceNew",!e||this.options&&!this.options.find(t=>t.value===e)),this.namespaceKey?Object(l["j"])(this.value,this.namespaceKey,e):this.value.metadata.namespace=e},changeNameAndNamespace(e){this.name=(e.text||"").toLowerCase(),this.namespace=e.selected},cancelCreateNamespace(e){var t;this.createNamespace=!1,this.$parent.$emit("createNamespace",!1),this.namespace=this.$store.getters["defaultNamespace"]||(null===(t=this.options.find(e=>!!e.value))||void 0===t?void 0:t.value)},selectNamespace(e){e&&""!==e.value?(this.createNamespace=!1,this.$parent.$emit("createNamespace",!1),this.$emit("isNamespaceNew",!1)):(this.createNamespace=!0,this.$parent.$emit("createNamespace",!0),this.$emit("isNamespaceNew",!0),o.a.nextTick(()=>this.$refs.namespace.focus()))}}},b=v,y=(a("c4d1"),a("d802")),g=Object(y["a"])(b,s,i,!1,null,"08979412",null);t["a"]=g.exports},"3efe":function(e,t,a){"use strict";a("94c5")},4296:function(e,t,a){"use strict";a("52a8")},4442:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{class:e.containerClass},[t("div",{class:e.defaultSectionClass},[t("div",{staticClass:"labels"},[t("div",{staticClass:"labels__header"},[e.showLabelTitle?t("h3",[t("t",{attrs:{k:"labels.labels.title"}})],1):e._e(),e.value.hasSystemLabels?t("ToggleSwitch",{attrs:{name:"label-system-toggle","on-label":e.t("labels.labels.show")},model:{value:e.toggler,callback:function(t){e.toggler=t},expression:"toggler"}}):e._e()],1),t("p",{staticClass:"mt-10 mb-10"},[t("t",{attrs:{k:"labels.labels.description"}})],1),t("div",{class:e.columnsClass},[e._t("labels",(function(){return[[t("KeyValue",{key:"labels",attrs:{value:e.value.labels,"protected-keys":e.value.systemLabels||[],"toggle-filter":e.toggler,"add-label":e.t("labels.addLabel"),mode:e.mode,"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setLabels(t)}}})]]}),{toggler:e.toggler})],2)])]),t("div",{staticClass:"spacer"}),e.showAnnotations?t("div",{class:e.sectionClass},[t("KeyValue",{key:"annotations",attrs:{value:e.value.annotations,"add-label":e.t("labels.addAnnotation"),mode:e.mode,title:e.t("labels.annotations.title"),"title-protip":e.annotationTitleTooltip,"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setAnnotations(t)}}})],1):e._e()])},i=[],n=a("a232"),o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("span",{staticClass:"toggle-container"},[t("span",{staticClass:"label no-select hand",class:{active:!e.state},on:{click:function(t){return e.toggle(!1)}}},[e._v(e._s(e.offLabel))]),t("label",{staticClass:"switch hand"},[t("input",{attrs:{type:"checkbox"},domProps:{checked:e.state},on:{input:function(t){return e.toggle(null)}}}),t("span",{staticClass:"slider round"})]),t("span",{staticClass:"label no-select hand",class:{active:e.state},on:{click:function(t){return e.toggle(!0)}}},[e._v(e._s(e.onLabel))])])},r=[],l=a("8bbf"),c=a.n(l),d=c.a.extend({props:{value:{type:[Boolean,String,Number],default:!1},offValue:{type:[Boolean,String,Number],default:!1},onValue:{type:[Boolean,String,Number],default:!0},offLabel:{type:String,default:""},onLabel:{type:String,default:""}},data(){return{state:!1}},watch:{value:{handler(){this.state=this.value===this.onValue},immediate:!0}},methods:{toggle(e){this.state=null===e?!this.state:e,this.$emit("input",this.state?this.onValue:this.offValue)}}}),u=d,p=(a("dff5"),a("d802")),h=Object(p["a"])(u,o,r,!1,null,"07f9b340",null),m=h.exports,f={components:{ToggleSwitch:m,KeyValue:n["a"]},props:{value:{type:Object,required:!0},mode:{type:String,required:!0},displaySideBySide:{type:Boolean,default:!1},defaultContainerClass:{type:String,default:""},defaultSectionClass:{type:String,default:""},labelTitleTooltip:{type:String,default:""},annotationTitleTooltip:{type:String,default:""},showAnnotations:{type:Boolean,default:!0},showLabelTitle:{type:Boolean,default:!0}},data(){return{toggler:!1}},computed:{containerClass(){return`${this.displaySideBySide?"row":""} ${this.defaultContainerClass}`.trim()},sectionClass(){return`${this.displaySideBySide?"col span-6":"row"} ${this.defaultSectionClass}`.trim()},columnsClass(){return(""+(this.displaySideBySide?"col span-6":"row")).trim()}}},v=f,b=(a("a11e"),Object(p["a"])(v,s,i,!1,null,"5c717a60",null));t["a"]=b.exports},"455e":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".radio-group:focus{border:none;outline:none}.radio-group h3{position:relative}.radio-group.row{display:flex}.radio-group.row .radio-container{margin-right:10px}.radio-group .label{font-size:14px!important}",""]),e.exports=t},"47ab":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{ref:"select",staticClass:"unlabeled-select",class:{disabled:e.disabled&&!e.isView,focused:e.focused,[e.mode]:!0,[e.status]:e.status,taggable:e.$attrs.taggable,taggable:e.$attrs.multiple},on:{focus:e.focusSearch}},[t("v-select",e._g(e._b({ref:"select-input",staticClass:"inline",class:{"select-input-view":"view"===e.mode},attrs:{autoscroll:!0,"append-to-body":e.appendToBody,"calculate-position":e.positionDropdown,disabled:e.isView||e.disabled,"get-option-key":t=>e.getOptionKey(t),"get-option-label":t=>e.getOptionLabel(t),label:e.optionLabel,options:e.options,"close-on-select":e.closeOnSelect,"map-keydown":e.mappedKeys,placeholder:e.placeholder,reduce:t=>e.reduce(t),searchable:e.isSearchable,selectable:e.selectable,value:null!=e.value?e.value:""},on:{"search:blur":e.onBlur,"search:focus":e.onFocus,open:e.resizeHandler,"option:created":t=>e.$emit("createdListItem",t)},scopedSlots:e._u([{key:"option",fn:function(a){return[t("div",{on:{mousedown:t=>e.onClickOption(a,t)}},[e._v(" "+e._s(a.label)+" ")])]}},e._l(e.$scopedSlots,(function(t,a){return{key:a,fn:function(t){return[e._t(a,null,null,t)]}}}))],null,!0)},"v-select",e.$attrs,!1),e.$listeners)),e.tooltip&&!e.focused?t("LabeledTooltip",{attrs:{hover:e.hoverTooltip,value:e.tooltip,status:e.status}}):e._e(),e.validationMessage?t("LabeledTooltip",{attrs:{hover:e.hoverTooltip,value:e.validationMessage}}):e._e()],1)},i=[],n=a("e24b"),o=a("480e"),r=a("9f16"),l=a("d174"),c=a("e8f0"),d={components:{LabeledTooltip:l["a"]},mixins:[o["a"],r["a"]],props:{appendToBody:{default:!0,type:Boolean},disabled:{default:!1,type:Boolean},getKeyForOption:{default:null,type:Function},mode:{default:"edit",type:String},optionKey:{default:null,type:String},optionLabel:{default:"label",type:String},placement:{default:null,type:String},placeholder:{type:String,default:""},popperOverride:{type:Function,default:null},reduce:{default:e=>e&&"object"===typeof e&&void 0!==e.value?e.value:e,type:Function},tooltip:{type:String,default:null},hoverTooltip:{type:Boolean,default:!0},status:{type:String,default:null},value:{default:null,type:[String,Object,Number,Array,Boolean]},closeOnSelect:{type:Boolean,default:!0}},methods:{getOptionLabel(e){return this.$attrs["get-option-label"]?this.$attrs["get-option-label"](e):Object(n["g"])(e,this.optionLabel)?this.localizedLabel?this.$store.getters["i18n/t"](Object(n["g"])(e,this.optionLabel)):Object(n["g"])(e,this.optionLabel):e},positionDropdown(e,t,{width:a}){if(this.popperOverride)return this.popperOverride(e,t,{width:a});Object(c["a"])(e,t,a,this.placement)},focus(){this.focusSearch()},focusSearch(){this.$nextTick(()=>{var e;const t=null===(e=this.$refs["select-input"])||void 0===e?void 0:e.searchEl;t&&t.focus()})},get:n["g"],onClickOption(e,t){c["b"].call(this,e,t)},selectable(e){return!e||!e.disabled&&"group"!==e.kind&&"divider"!==e.kind&&!e.loading},getOptionKey(e){if(e&&this.optionKey)return Object(n["g"])(e,this.optionKey);if(null!==e&&void 0!==e&&e.optionKey)return Object(n["g"])(e,e.optionKey);const t=this.getOptionLabel(e);return"string"===typeof t||"number"===typeof t?t:Math.random(1e5)},report(e){alert(e)}},computed:{requiredField(){return this.required||this.rules.some(e=>"required"===(null===e||void 0===e?void 0:e.name))},validationMessage(){const e=this.rules.find(e=>"required"===(null===e||void 0===e?void 0:e.name)),t=[],a=null===this||void 0===this?void 0:this.value;if(e&&this.blurred&&!this.focused){const t=e(a);if(t)return t}for(const s of this.rules){const e=s(a);e&&"required"!==s.name&&t.push(e)}return t.length>0&&(this.blurred||this.focused)?t.join(", "):void 0}}},u=d,p=(a("3efe"),a("d802")),h=Object(p["a"])(u,s,i,!1,null,"55a8f708",null);t["a"]=h.exports},"48b3":function(e,t,a){var s=a("2230");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("7ab3d44b",s,!0,{sourceMap:!1,shadowMode:!1})},"4a2c":function(e,t,a){var s=a("c364"),i=a("d0e7");function n(e,t){return t.length<2?e:s(e,i(t,0,-1))}e.exports=n},"4e3f":function(e,t,a){var s=a("e92d");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("0dc6d51d",s,!0,{sourceMap:!1,shadowMode:!1})},"52a8":function(e,t,a){var s=a("455e");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("05aa0947",s,!0,{sourceMap:!1,shadowMode:!1})},5841:function(e,t,a){"use strict";a("d389")},6672:function(e,t,a){"use strict";a("cd81")},"66c9":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".radio-view{display:flex;flex-direction:column}.radio-view LABEL{color:var(--input-label)}.radio-group .text-label{display:block;padding-bottom:5px}.radio-container{position:relative;display:inline-flex;align-items:flex-start;margin:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;border-radius:var(--border-radius);padding-bottom:5px}.radio-container,.radio-container .radio-button-outer-container-description,.radio-container .radio-label{cursor:pointer}.radio-container.disabled,.radio-container.disabled .radio-button-outer-container-description,.radio-container.disabled .radio-label{cursor:not-allowed}.radio-container .radio-custom{height:14px;width:14px;min-height:14px;min-width:14px;background-color:var(--input-bg);border-radius:50%;transition:all .3s ease-out;border:1.5px solid var(--border);margin-top:5px}.radio-container .radio-custom:focus{outline:none;border-radius:50%}.radio-container input{display:none}.radio-container .radio-custom[aria-checked=true]{background-color:var(--primary);transform:rotate(0deg) scale(1);opacity:1;border:1.5px solid var(--primary)}.radio-container .radio-custom[aria-checked=true].text-muted{opacity:.25}.radio-container input:disabled~.radio-custom:not([aria-checked=true]){background-color:var(--disabled-bg);opacity:.25}.radio-container .radio-button-outer-container-description{color:var(--input-label);font-size:11px;margin-top:5px}.radio-container .labeling{display:inline-flex;flex-direction:column;margin:3px 10px 0 5px}",""]),e.exports=t},"6b8f":function(e,t,a){var s=a("c68c"),i=a("a750"),n=a("4a2c"),o=a("629b");function r(e,t){return t=s(t,e),e=n(e,t),null==e||delete e[o(i(t))]}e.exports=r},"70e5":function(e,t,a){var s=a("844e");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("efdb102e",s,!0,{sourceMap:!1,shadowMode:!1})},7881:function(e,t,a){"use strict";a("badc")},8275:function(e,t,a){"use strict";var s=a("c230");a.d(t,"a",(function(){return s["a"]}))},"834b":function(e,t,a){var s=a("66c9");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("17b48418",s,!0,{sourceMap:!1,shadowMode:!1})},"844e":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,'.toggle-container[data-v-07f9b340]{align-items:center;display:flex}.toggle-container span[data-v-07f9b340]:first-child{padding-right:6px}.toggle-container span[data-v-07f9b340]:last-child{padding-left:6px}.switch[data-v-07f9b340]{position:relative;display:inline-block;width:48px;height:24px}.switch input[data-v-07f9b340]{opacity:0;width:0;height:0}.slider[data-v-07f9b340]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--checkbox-disabled-bg)}.slider[data-v-07f9b340],.slider[data-v-07f9b340]:before{position:absolute;transition:.4s}.slider[data-v-07f9b340]:before{content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:var(--checkbox-tick)}input:checked+.slider[data-v-07f9b340]{background-color:var(--checkbox-ticked-bg)}input:focus+.slider[data-v-07f9b340]{box-shadow:0 0 1px var(--checkbox-ticked-bg)}input:checked+.slider[data-v-07f9b340]:before{transform:translateX(24px)}.slider.round[data-v-07f9b340]{border-radius:34px}.slider.round[data-v-07f9b340]:before{border-radius:50%}',""]),e.exports=t},9274:function(e,t,a){var s=a("4b7a"),i=a("0340");function n(e,t){var a=[];if(!e||!e.length)return a;var n=-1,o=[],r=e.length;t=s(t,3);while(++n<r){var l=e[n];t(l,n,e)&&(a.push(l),o.push(n))}return i(e,o),a}e.exports=n},"928c":function(e,t,a){"use strict";a("834b")},9343:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".confirm-modal .btn[data-v-7090e1b4]{margin:0 10px}.confirm-modal .v--modal-box[data-v-7090e1b4]{background-color:var(--default);box-shadow:none;min-height:200px}.confirm-modal .v--modal-box .body[data-v-7090e1b4]{min-height:75px;padding:10px 0 0 15px}.confirm-modal .v--modal-box .body p[data-v-7090e1b4]{margin-top:10px}.confirm-modal .v--modal-box .header[data-v-7090e1b4]{background-color:var(--error);padding:15px 0 0 15px;height:50px}.confirm-modal .v--modal-box .header h4[data-v-7090e1b4]{color:#fff}.confirm-modal .v--modal-box .footer[data-v-7090e1b4]{border-top:1px solid var(--border);text-align:center;padding:10px 0 0 15px;height:60px}",""]),e.exports=t},"94c5":function(e,t,a){var s=a("ae28");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("eda2d3c4",s,!0,{sourceMap:!1,shadowMode:!1})},"977f":function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",[e.title?t("div",{staticClass:"clearfix"},[e._t("title",(function(){return[t("h3",[e._v(" "+e._s(e.title)+" "),e.showProtip?t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.protip,expression:"protip"}],staticClass:"icon icon-info"}):e._e()])]}))],2):e._e(),e.rows.length?[e.showHeader?t("div",[e._t("column-headers",(function(){return[t("label",{staticClass:"value text-label mb-10"},[e._v(" "+e._s(e.valueLabel)+" ")])]}))],2):e._e(),e._l(e.rows,(function(a,s){return t("div",{key:s,staticClass:"box",attrs:{"data-testid":"array-list-box"+s}},[e._t("columns",(function(){return[t("div",{staticClass:"value"},[e._t("value",(function(){return[e.valueMultiline?t("TextAreaAutoGrow",{ref:"value",refInFor:!0,attrs:{placeholder:e.valuePlaceholder,mode:e.mode,disabled:e.disabled},on:{paste:function(t){return e.onPaste(s,t)},input:e.queueUpdate},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"row.value"}}):e.rules.length>0?t("LabeledInput",{ref:"value",refInFor:!0,attrs:{placeholder:e.valuePlaceholder,disabled:e.isView||e.disabled,rules:e.rules,compact:!1},on:{paste:function(t){return e.onPaste(s,t)},input:e.queueUpdate},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"row.value"}}):t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"row.value"}],ref:"value",refInFor:!0,attrs:{placeholder:e.valuePlaceholder,disabled:e.isView||e.disabled},domProps:{value:a.value},on:{paste:function(t){return e.onPaste(s,t)},input:[function(t){t.target.composing||e.$set(a,"value",t.target.value)},e.queueUpdate]}})]}),{row:a,mode:e.mode,isView:e.isView,queueUpdate:e.queueUpdate})],2)]}),{queueUpdate:e.queueUpdate,i:s,rows:e.rows,row:a,mode:e.mode,isView:e.isView}),e.showRemove?t("div",{staticClass:"remove"},[e._t("remove-button",(function(){return[t("button",{staticClass:"btn role-link",attrs:{type:"button",disabled:e.isView,"data-testid":"remove-item-"+s},on:{click:function(t){return e.remove(a,s)}}},[e._v(" "+e._s(e.removeLabel)+" ")])]}),{remove:()=>e.remove(a,s),i:s,row:a})],2):e._e()],2)}))]:"view"===e.mode?t("div",{staticClass:"text-muted"},[e._v(" — ")]):t("div",[e._t("empty")],2),e.showAdd&&!e.isView?t("div",{staticClass:"footer"},[e.showAdd?e._t("add",(function(){return[t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button",disabled:e.loading,"data-testid":"array-list-button"},on:{click:function(t){return e.add()}}},[e.loading?t("i",{staticClass:"mr-5 icon icon-spinner icon-spin icon-lg"}):e._e(),e._v(" "+e._s(e.addLabel)+" ")])]}),{add:e.add}):e._e()],2):e._e()],2)},i=[],n=a("44db"),o=a.n(n),r=a("da25"),l=a("bddd"),c=a("8275"),d=a("e24b"),u=a("8e93");const p="Tip: Paste lines into any list field for easy bulk entry";var h={components:{TextAreaAutoGrow:c["a"],LabeledInput:u["a"]},props:{value:{type:Array,default:null},mode:{type:String,default:r["p"]},initialEmptyRow:{type:Boolean,default:!1},title:{type:String,default:""},protip:{type:[String,Boolean],default:p},showHeader:{type:Boolean,default:!1},valueLabel:{type:String,default:"Value"},valuePlaceholder:{type:String,default:"e.g. bar"},valueMultiline:{type:Boolean,default:!1},addLabel:{type:String,default(){return this.$store.getters["i18n/t"]("generic.add")}},addAllowed:{type:Boolean,default:!0},removeLabel:{type:String,default(){return this.$store.getters["i18n/t"]("generic.remove")}},removeAllowed:{type:Boolean,default:!0},defaultAddValue:{type:[String,Number,Object,Array],default:""},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rules:{default:()=>[],type:Array,validator:e=>e.every(e=>["function"].includes(typeof e))}},data(){const e=(this.value||[]).slice(),t=[];for(const a of e)t.push({value:a});if(!t.length&&this.initialEmptyRow){const e=this.defaultAddValue?Object(d["e"])(this.defaultAddValue):"";t.push({value:e})}return{rows:t,lastUpdateWasFromValue:!1}},computed:{isView(){return this.mode===r["w"]},showAdd(){return this.addAllowed},showRemove(){return this.removeAllowed},isDefaultProtip(){return this.protip===p},showProtip(){return!(!this.protip||this.isDefaultProtip)||!this.valueMultiline&&this.protip}},watch:{value(){this.lastUpdateWasFromValue=!0,this.rows=(this.value||[]).map(e=>({value:e}))},rows:{deep:!0,handler(e,t){this.lastUpdateWasFromValue||this.queueUpdate(),this.lastUpdateWasFromValue=!1}}},created(){this.queueUpdate=o()(this.update,50)},methods:{add(){this.rows.push({value:Object(d["e"])(this.defaultAddValue)}),this.defaultAddValue&&this.queueUpdate(),this.$nextTick(()=>{const e=this.$refs.value;e&&e.length>0&&e[e.length-1].focus(),this.$emit("add")})},remove(e,t){this.$emit("remove",{row:e,index:t}),Object(l["h"])(this.rows,t),this.queueUpdate()},update(){if(this.isView)return;const e=[];for(const t of this.rows){const a=!this.valueMultiline&&"string"===typeof t.value,s=a?t.value.trim():t.value;"undefined"!==typeof s&&e.push(s)}this.$emit("input",e)},onPaste(e,t){if(this.valueMultiline)return;t.preventDefault();const a=t.clipboardData.getData("text/plain"),s=a.split("\n").map(e=>({value:e}));1!==s.length&&(t.preventDefault(),this.rows.splice(e,1,...s),this.update())}}},m=h,f=(a("00c1"),a("d802")),v=Object(f["a"])(m,s,i,!1,null,"f06ff0c4",null);t["a"]=v.exports},9838:function(e,t,a){"use strict";a("d953")},"987b":function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".key-value{width:100%}.key-value .file-selector.role-link{text-transform:none;padding:0}.key-value .kv-container{display:grid;align-items:center;-moz-column-gap:20px;column-gap:20px}.key-value .kv-container label{margin-bottom:0}.key-value .kv-container .kv-item{width:100%;margin:10px 0 10px 0}.key-value .kv-container .kv-item.extra,.key-value .kv-container .kv-item.key{align-self:flex-start}.key-value .kv-container .kv-item.value .value-container.upload-button{position:relative;display:flex;justify-content:right;align-items:center}.key-value .kv-container .kv-item.value .value-container .file-selector{position:absolute;margin-right:5px}.key-value .kv-container .kv-item.value textarea{padding:10px 10px 10px 10px}.key-value .kv-container .kv-item .text-monospace:not(.conceal){font-family:monospace,monospace}.key-value .remove{text-align:center}.key-value .remove BUTTON{padding:0}.key-value .title{margin-bottom:10px}.key-value .title .read-from-file{float:right}.key-value input{height:40px;line-height:1}.key-value .footer .protip{float:right;padding:5px 0}.key-value .download{text-align:right}.key-value .copy-value{padding:0 0 0 10px}",""]),e.exports=t},a11e:function(e,t,a){"use strict";a("a701")},a232:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"key-value"},[e.title||e.$slots.title?t("div",{staticClass:"clearfix"},[e._t("title",(function(){return[t("h3",[e._v(" "+e._s(e.title)+" "),e.titleProtip?t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.titleProtip,expression:"titleProtip"}],staticClass:"icon icon-info"}):e._e()])]}))],2):e._e(),t("div",{staticClass:"kv-container",style:e.containerStyle},[e.rows.length||e.isView?[t("label",{staticClass:"text-label"},[e._v(" "+e._s(e.keyLabel)+" "),e.protip&&!e.isView&&e.addAllowed?t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.protip,expression:"protip"}],staticClass:"icon icon-info"}):e._e()]),t("label",{staticClass:"text-label"},[e._v(" "+e._s(e.valueLabel)+" ")]),e._l(e.extraColumns,(function(a){return t("label",{key:a},[e._t("label:"+a,(function(){return[e._v(e._s(a))]}))],2)})),e.canRemove?e._t("remove",(function(){return[t("span")]})):e._e()]:e._e(),!e.rows.length&&e.isView?[t("div",{staticClass:"kv-item key text-muted"},[e._v(" — ")]),t("div",{staticClass:"kv-item key text-muted"},[e._v(" — ")])]:e._l(e.filteredRows,(function(a,s){return[t("div",{key:s+"key",staticClass:"kv-item key"},[e._t("key",(function(){return[e.keyOptions?t("Select",{ref:"key",refInFor:!0,attrs:{searchable:!0,disabled:e.disabled||e.isProtected(a.key),clearable:!1,taggable:e.keyTaggable,options:e.calculateOptions(a[e.keyName])},on:{input:e.queueUpdate},model:{value:a[e.keyName],callback:function(t){e.$set(a,e.keyName,t)},expression:"row[keyName]"}}):t("input",{directives:[{name:"model",rawName:"v-model",value:a[e.keyName],expression:"row[keyName]"}],ref:"key",refInFor:!0,attrs:{disabled:e.isView||e.disabled||!e.keyEditable||e.isProtected(a.key),placeholder:e.keyPlaceholder},domProps:{value:a[e.keyName]},on:{input:[function(t){t.target.composing||e.$set(a,e.keyName,t.target.value)},e.queueUpdate],paste:function(t){return e.onPaste(s,t)}}})]}),{row:a,mode:e.mode,keyName:e.keyName,valueName:e.valueName,queueUpdate:e.queueUpdate,disabled:e.disabled})],2),t("div",{key:s+"value",staticClass:"kv-item value"},[e._t("value",(function(){return[a.supported?a.binary?t("div",[e._v(" "+e._s(e.binaryTextSize(a.value))+" ")]):t("div",{staticClass:"value-container",class:{"upload-button":e.parseValueFromFile}},[e.valueMarkdownMultiline?t("CodeMirror",{ref:"cm",refInFor:!0,class:{["focus"]:e.codeMirrorFocus[s]},attrs:{"data-testid":"code-mirror-multiline-field",value:a[e.valueName],"as-text-area":!0,mode:e.mode},on:{onInput:function(t){return e.onInputMarkdownMultiline(s,t)},onFocus:function(t){return e.onFocusMarkdownMultiline(s,t)}}}):e.valueMultiline?t("TextAreaAutoGrow",{class:{conceal:e.valueConcealed},attrs:{"data-testid":"value-multiline",disabled:e.disabled||e.isProtected(a.key),mode:e.mode,placeholder:e.valuePlaceholder,"min-height":40,spellcheck:!1},on:{input:e.queueUpdate},model:{value:a[e.valueName],callback:function(t){e.$set(a,e.valueName,t)},expression:"row[valueName]"}}):"checkbox"===(e.valueConcealed?"password":"text")?t("input",{directives:[{name:"model",rawName:"v-model",value:a[e.valueName],expression:"row[valueName]"}],attrs:{disabled:e.isView||e.disabled||e.isProtected(a.key),placeholder:e.valuePlaceholder,autocorrect:"off",autocapitalize:"off",spellcheck:"false",type:"checkbox"},domProps:{checked:Array.isArray(a[e.valueName])?e._i(a[e.valueName],null)>-1:a[e.valueName]},on:{input:e.queueUpdate,change:function(t){var s=a[e.valueName],i=t.target,n=!!i.checked;if(Array.isArray(s)){var o=null,r=e._i(s,o);i.checked?r<0&&e.$set(a,e.valueName,s.concat([o])):r>-1&&e.$set(a,e.valueName,s.slice(0,r).concat(s.slice(r+1)))}else e.$set(a,e.valueName,n)}}}):"radio"===(e.valueConcealed?"password":"text")?t("input",{directives:[{name:"model",rawName:"v-model",value:a[e.valueName],expression:"row[valueName]"}],attrs:{disabled:e.isView||e.disabled||e.isProtected(a.key),placeholder:e.valuePlaceholder,autocorrect:"off",autocapitalize:"off",spellcheck:"false",type:"radio"},domProps:{checked:e._q(a[e.valueName],null)},on:{input:e.queueUpdate,change:function(t){return e.$set(a,e.valueName,null)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:a[e.valueName],expression:"row[valueName]"}],attrs:{disabled:e.isView||e.disabled||e.isProtected(a.key),placeholder:e.valuePlaceholder,autocorrect:"off",autocapitalize:"off",spellcheck:"false",type:e.valueConcealed?"password":"text"},domProps:{value:a[e.valueName]},on:{input:[function(t){t.target.composing||e.$set(a,e.valueName,t.target.value)},e.queueUpdate]}}),e.parseValueFromFile&&e.readAllowed&&!e.isView&&e.isValueFieldEmpty(a[e.valueName])?t("FileSelector",{staticClass:"btn btn-sm role-secondary file-selector",attrs:{label:e.t("generic.upload"),"include-file-name":!0},on:{selected:function(t){return e.onValueFileSelected(s,t)}}}):e._e()],1):t("div",[e._v(" "+e._s(e.t("detailText.unsupported",null,!0))+" ")])]}),{row:a,mode:e.mode,keyName:e.keyName,valueName:e.valueName,queueUpdate:e.queueUpdate})],2),e._l(e.extraColumns,(function(i){return t("div",{key:s+i,staticClass:"kv-item extra"},[e._t("col:"+i,null,{row:a,queueUpdate:e.queueUpdate})],2)})),e.canRemove?t("div",{key:s,staticClass:"kv-item remove",attrs:{"data-testid":"remove-column-"+s}},[e._t("removeButton",(function(){return[t("button",{staticClass:"btn role-link",attrs:{type:"button",disabled:e.isView||e.isProtected(a.key)||e.disabled},on:{click:function(t){return e.remove(s)}}},[e._v(" "+e._s(e.removeLabel||e.t("generic.remove"))+" ")])]}),{remove:e.remove,row:a,i:s})],2):e._e()]}))],2),!e.addAllowed&&!e.readAllowed||e.isView?e._e():t("div",{staticClass:"footer mt-20"},[e._t("add",(function(){return[e.addAllowed?t("button",{staticClass:"btn role-tertiary add",attrs:{type:"button",disabled:e.loading||e.disabled||e.keyOptions&&0===e.filteredKeyOptions.length},on:{click:function(t){return e.add()}}},[e.loading?t("i",{staticClass:"mr-5 icon icon-spinner icon-spin icon-lg"}):e._e(),e._v(" "+e._s(e.addLabel)+" ")]):e._e(),e.readAllowed?t("FileSelector",{staticClass:"role-tertiary",attrs:{disabled:e.isView,label:e.t("generic.readFromFile"),"include-file-name":!0},on:{selected:e.onFileSelected}}):e._e()]}),{add:e.add})],2)])},i=[],n=a("44db"),o=a.n(n),r=a("1d19"),l=a("bddd"),c=a("0f81"),d=a("c87d"),u=a("8275"),p=a("e24b"),h=a("47ab"),m=a("8b2c"),f=a("da25"),v=a("2cb5"),b=a("8c26"),y={name:"KeyValue",components:{CodeMirror:b["a"],Select:h["a"],TextAreaAutoGrow:u["a"],FileSelector:m["b"]},props:{value:{type:[Array,Object],default:null},defaultValue:{type:[Array,Object],default:null},binaryValueKeys:{type:[Array,Object],default:null},mode:{type:String,default:f["p"]},asMap:{type:Boolean,default:!0},initialEmptyRow:{type:Boolean,default:!1},title:{type:String,default:""},titleProtip:{type:String,default:""},protip:{type:[String,Boolean],default(){return this.$store.getters["i18n/t"]("keyValue.protip",null,!0)}},keyName:{type:String,default:"key"},keyLabel:{type:String,default(){return this.$store.getters["i18n/t"]("generic.key")}},keyEditable:{type:Boolean,default:!0},keyOptions:{type:Array,default:null},keyTaggable:{type:Boolean,default:!0},keyOptionUnique:{type:Boolean,default:!1},keyPlaceholder:{type:String,default(){return this.$store.getters["i18n/t"]("keyValue.keyPlaceholder")}},protectedKeys:{type:Array,default:()=>[]},toggleFilter:{type:Boolean,default:!1},separatorLabel:{type:String,default:""},valueName:{type:String,default:"value"},valueLabel:{type:String,default(){return this.$store.getters["i18n/t"]("generic.value")}},valuePlaceholder:{type:String,default(){return this.$store.getters["i18n/t"]("keyValue.valuePlaceholder")}},valueCanBeEmpty:{type:Boolean,default:!1},displayValuesAsBinary:{type:Boolean,default:!1},valueMarkdownMultiline:{type:Boolean,default:!1},valueMultiline:{type:Boolean,default:!0},valueTrim:{type:Boolean,default:!0},handleBase64:{type:Boolean,default:!1},valueConcealed:{type:Boolean,default:!1},supported:{type:Function,default:e=>!0},preserveKeys:{type:Array,default:null},extraColumns:{type:Array,default:()=>[]},defaultAddData:{type:Object,default:()=>{}},addLabel:{type:String,default(){return this.$store.getters["i18n/t"]("generic.add")}},addIcon:{type:String,default:"icon-plus"},addAllowed:{type:Boolean,default:!0},readLabel:{type:String,default(){return this.$store.getters["i18n/t"]("generic.readFromFile")}},readIcon:{type:String,default:"icon-upload"},readAllowed:{type:Boolean,default:!0},readAccept:{type:String,default:"*"},readMultiple:{type:Boolean,default:!1},removeLabel:{type:String,default:""},removeIcon:{type:String,default:"icon-minus"},removeAllowed:{type:Boolean,default:!0},fileModifier:{type:Function,default:(e,t)=>({name:e,value:t})},parserSeparators:{type:Array,default:()=>[": ","="]},loading:{default:!1,type:Boolean},parseLinesFromFile:{default:!1,type:Boolean},parseValueFromFile:{default:!1,type:Boolean},disabled:{default:!1,type:Boolean}},data(){const e=this.getRows(this.value);return{rows:e,codeMirrorFocus:{}}},computed:{isView(){return this.mode===f["w"]},containerStyle(){const e=this.canRemove?" 50px":"",t=2+this.extraColumns.length;return`grid-template-columns: repeat(${t}, 1fr)${e};`},usedKeyOptions(){return this.rows.map(e=>e[this.keyName])},filteredKeyOptions(){return this.keyOptionUnique?this.keyOptions.filter(e=>!this.usedKeyOptions.includes(e.value)):this.keyOptions},canRemove(){return!this.isView&&this.removeAllowed},filteredRows(){return this.rows.filter(e=>!(this.isProtected(e.key)&&!this.toggleFilter))}},created(){this.queueUpdate=o()(this.update,500)},watch:{defaultValue(e){Array.isArray(e)&&(this.rows=this.getRows(e),this.$emit("input",e))}},methods:{isProtected(e){return this.protectedKeys&&this.protectedKeys.includes(e)},getRows(e){const t=[];if(this.asMap){const a=e||{};Object.keys(a).forEach(e=>{let s=a[e];const i=Object(c["a"])(a[e]),n=Object(v["b"])(i);this.handleBase64&&n&&(s=Object(c["a"])(s)),t.push({key:e,value:s,binary:this.displayValuesAsBinary||this.handleBase64&&!n,canEncode:this.handleBase64&&n,supported:!0})})}else{const s=e||[];for(const e of s){var a;let s=e[this.valueName]||"";const i=Object(c["a"])(e[this.valueName]),n=Object(v["b"])(i);this.handleBase64&&n&&(s=Object(c["a"])(s));const o={[this.keyName]:e[this.keyName]||"",[this.valueName]:s,binary:this.displayValuesAsBinary||this.handleBase64&&!n,canEncode:this.handleBase64&&n,supported:this.supported(e)};null===(a=this.preserveKeys)||void 0===a||a.map(t=>{"undefined"!==typeof e[t]&&(o[t]=e[t])}),t.push(o)}}return t&&!t.length&&this.initialEmptyRow&&t.push({[this.keyName]:"",[this.valueName]:"",binary:!1,canEncode:this.handleBase64,supported:!0}),t},add(e="",t=""){const a={...this.defaultAddData,[this.keyName]:e,[this.valueName]:t};a.binary=!1,a.canEncode=this.handleBase64,a.supported=!0,this.rows.push(a),this.queueUpdate(),this.$nextTick(()=>{if(this.$refs.key){const e=this.$refs.key,t=e[e.length-1];t.focus()}else this.$emit("focusKey")})},remove(e){Object(l["h"])(this.rows,e),this.queueUpdate()},removeEmptyRows(){const e=this.rows.filter(e=>e.value.length||e.key.length);this.$set(this,"rows",e)},onFileSelected(e){const{name:t,value:a}=this.fileModifier(e.name,e.value);if(this.parseLinesFromFile){const e=a.split("\n");e.forEach(e=>{if(e.length){const[t,a]=e.split("=");this.add(t,a)}}),e.length>0&&this.removeEmptyRows()}else this.add(t,a,this.displayValuesAsBinary)},download(e,t){const a=this.rows[e],s=a[this.keyName],i=a[this.valueName];Object(d["a"])(s,i,"application/octet-stream")},update(){let e;if(this.asMap){e={};const t=this.keyName,a=this.valueName;for(const s of this.rows){let i=s[a]||"";const n=(s[t]||"").trim();i&&"object"===Object(r["c"])(i)?e[n]=JSON.parse(JSON.stringify(i)):(i=i||"",this.valueTrim&&Object(v["b"])(i)&&(i=i.trim()),s.canEncode&&(i=Object(c["b"])(i)),n&&(i||this.valueCanBeEmpty)&&(e[n]=i))}}else{const t=this.preserveKeys||[];Object(l["i"])(t,this.keyName),Object(l["i"])(t,this.valueName),e=this.rows.map(e=>{let a=e[this.valueName];e.canEncode&&(a=Object(c["b"])(a));const s={[this.keyName]:e[this.keyName],[this.valueName]:a};for(const i of t)"undefined"!==typeof e[i]&&(s[i]=e[i]);return s})}this.$emit("input",e)},onPaste(e,t,a){const s=t.clipboardData.getData("text/plain"),i=s.split("\n"),n=i.map(e=>{const t=!e.includes(":")||e.indexOf("=")<e.indexOf(":")&&e.includes(":")?"=":":";return e.split(t)});if(0===n.length||1===n.length&&n[0].length<2)return;t.preventDefault();const o=n.map(e=>({[this.keyName]:(e[0]||"").trim(),[this.valueName]:(e[1]||"").trim(),supported:!0,canEncode:this.handleBase64,binary:this.displayValuesAsBinary}));this.rows.splice(e,1,...o),this.queueUpdate()},calculateOptions(e){const t=this.keyOptions.find(t=>t.value===e);return t?[t,...this.filteredKeyOptions]:this.filteredKeyOptions},binaryTextSize(e){const t=this.handleBase64?Object(c["a"])(e):e,a=e.length?Object(c["c"])(t):0;return this.t("detailText.binary",{n:a},!0)},get:p["g"],onInputMarkdownMultiline(e,t){this.rows=this.rows.map((a,s)=>s===e?{...a,value:t}:a),this.queueUpdate()},onFocusMarkdownMultiline(e,t){this.$set(this.codeMirrorFocus,e,t)},onValueFileSelected(e,t){const{name:a,value:s}=t;this.rows[e][this.keyName]||(this.rows[e][this.keyName]=a),this.rows[e][this.valueName]=s},isValueFieldEmpty(e){return!e||0===e.trim().length}}},g=y,x=(a("6672"),a("d802")),w=Object(x["a"])(g,s,i,!1,null,null,null);t["a"]=w.exports},a301:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".labels__header[data-v-5c717a60]{display:flex;justify-content:space-between}",""]),e.exports=t},a4f9:function(e,t,a){var s=a("f1a8");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("fedd3d18",s,!0,{sourceMap:!1,shadowMode:!1})},a5bd:function(e,t,a){"use strict";a("48b3")},a701:function(e,t,a){var s=a("a301");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("896367b0",s,!0,{sourceMap:!1,shadowMode:!1})},a750:function(e,t){function a(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}e.exports=a},aa62:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".array-list-grouped>.box{position:relative;display:block}.array-list-grouped>.box>.remove{position:absolute;top:0;right:0}.array-list-grouped>.box>.info-box{margin-bottom:0;padding-right:25px}",""]),e.exports=t},ae28:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".unlabeled-select[data-v-55a8f708]{position:relative}.unlabeled-select[data-v-55a8f708] .v-select.select-input-view .vs__actions{visibility:hidden}.unlabeled-select .vs--multiple[data-v-55a8f708] .vs__selected-options .vs__selected{width:auto}.unlabeled-select[data-v-55a8f708] .labeled-tooltip.error .status-icon{top:7px;right:2px}.unlabeled-select[data-v-55a8f708] .vs__selected-options{display:flex;margin:3px}.unlabeled-select[data-v-55a8f708] .vs__selected-options .vs__selected{width:auto}.unlabeled-select[data-v-55a8f708] .v-select.vs--open .vs__dropdown-toggle{color:var(--outline)!important}.unlabeled-select.focused.success[data-v-55a8f708],.unlabeled-select.success[data-v-55a8f708]{border:solid 1px var(--success)}.unlabeled-select.focused.success .selected[data-v-55a8f708],.unlabeled-select.focused.success .vs__actions[data-v-55a8f708]:after,.unlabeled-select.focused.success input[data-v-55a8f708],.unlabeled-select.success .selected[data-v-55a8f708],.unlabeled-select.success .vs__actions[data-v-55a8f708]:after,.unlabeled-select.success input[data-v-55a8f708]{color:var(--success)}.unlabeled-select.focused.warning[data-v-55a8f708],.unlabeled-select.warning[data-v-55a8f708]{border:solid 1px var(--warning)}.unlabeled-select.focused.warning .selected[data-v-55a8f708],.unlabeled-select.focused.warning .vs__actions[data-v-55a8f708]:after,.unlabeled-select.focused.warning input[data-v-55a8f708],.unlabeled-select.warning .selected[data-v-55a8f708],.unlabeled-select.warning .vs__actions[data-v-55a8f708]:after,.unlabeled-select.warning input[data-v-55a8f708]{color:var(--warning)}.unlabeled-select.error[data-v-55a8f708],.unlabeled-select.focused.error[data-v-55a8f708]{border:solid 1px var(--error)}.unlabeled-select.error .vs__actions[data-v-55a8f708]:after,.unlabeled-select.error>label[data-v-55a8f708],.unlabeled-select.focused.error .vs__actions[data-v-55a8f708]:after,.unlabeled-select.focused.error>label[data-v-55a8f708]{color:var(--error)}",""]),e.exports=t},b494:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,"button[data-v-08979412]{all:unset;height:0;position:relative;top:-35px;float:right;margin-right:7px;cursor:pointer}button .align-value[data-v-08979412]{padding-top:7px}.row.name-ns-description[data-v-08979412]{max-height:61px}.row .namespace-select[data-v-08979412] .labeled-select{min-width:40%}.row .namespace-select[data-v-08979412] .labeled-select .v-select.inline.vs--single{padding-bottom:2px}.row.flip-direction[data-v-08979412]{flex-direction:column}.row.flip-direction.name-ns-description[data-v-08979412]{max-height:none}.row.flip-direction>div>*[data-v-08979412]{margin-bottom:20px}",""]),e.exports=t},b8a9:function(e,t,a){var s=a("9343");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("4615f176",s,!0,{sourceMap:!1,shadowMode:!1})},badc:function(e,t,a){var s=a("df43");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("37941bb2",s,!0,{sourceMap:!1,shadowMode:!1})},c422:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("Tabbed",e._b({attrs:{"default-tab":e.defaultTab},on:{changed:e.tabChange}},"Tabbed",e.$attrs,!1),[e._t("default"),e.showConditions?t("Tab",{attrs:{"label-key":"resourceTabs.conditions.tab",name:"conditions",weight:-1,"display-alert-icon":e.conditionsHaveIssues}},[t("Conditions",{attrs:{value:e.value}})],1):e._e(),e.showEvents?t("Tab",{attrs:{"label-key":"resourceTabs.events.tab",name:"events",weight:-2}},["events"===e.selectedTab?t("SortableTable",{attrs:{rows:e.events,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,"default-sort-by":"date"}}):e._e()],1):e._e(),e.showRelated?t("Tab",{attrs:{name:"related","label-key":"resourceTabs.related.tab",weight:-3}},[t("h3",{directives:[{name:"t",rawName:"v-t",value:"resourceTabs.related.from",expression:"'resourceTabs.related.from'"}]}),t("RelatedResources",{attrs:{"ignore-types":[e.value.type],value:e.value,direction:"from"}}),t("h3",{directives:[{name:"t",rawName:"v-t",value:"resourceTabs.related.to",expression:"'resourceTabs.related.to'"}],staticClass:"mt-20"}),t("RelatedResources",{attrs:{"ignore-types":[e.value.type],value:e.value,direction:"to"}})],1):e._e(),e._l(e.extensionTabs,(function(a,s){return t("Tab",{key:`${a.name}${s}`,attrs:{name:a.name,label:a.label,"label-key":a.labelKey,weight:a.weight,tooltip:a.tooltip,"show-header":a.showHeader,"display-alert-icon":a.displayAlertIcon,error:a.error,badge:a.badge}},[t(a.component,{tag:"component",attrs:{resource:e.value}})],1)}))],2)},i=[],n=a("0cb2"),o=a("38de"),r=a("305c"),l=function(){var e=this,t=e._self._c;return t("SortableTable",{attrs:{headers:e.headers,rows:e.rows,"key-field":"condition","default-sort-by":"condition","table-actions":!1,"row-actions":!1,search:!1},scopedSlots:e._u([{key:"cell:condition",fn:function({row:a}){return[t("span",{class:{"text-error":a.error}},[e._v(e._s(a.condition))])]}},{key:"cell:status",fn:function({row:a}){return[t("span",{class:{"text-error":a.error}},[e._v(e._s(a.status))])]}}])})},c=[],d=a("0fb1"),u={components:{SortableTable:d["b"]},props:{value:{type:Object,default:()=>({})}},computed:{headers(){return[{name:"condition",labelKey:"tableHeaders.condition",value:"condition",width:150,sort:"condition",dashIfEmpty:!0},{name:"status",labelKey:"tableHeaders.status",value:"status",width:75,sort:"status",dashIfEmpty:!0},{name:"time",labelKey:"tableHeaders.updated",value:"time",sort:"time",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125,dashIfEmpty:!0},{name:"message",labelKey:"tableHeaders.message",value:"message",sort:["message"],dashIfEmpty:!0}]},rows(){var e;return((null===(e=this.value.status)||void 0===e?void 0:e.conditions)||[]).map(e=>{let t=e.message||"";return e.reason&&(t=`[${e.reason}] ${t}`.trim()),{condition:e.type||"Unknown",status:e.status||"Unknown",error:e.error,time:e.lastProbeTime||e.lastUpdateTime||e.lastTransitionTime,message:t}})}}},p=u,h=a("d802"),m=Object(h["a"])(p,l,c,!1,null,null,null),f=m.exports,v=a("907c"),b=a("da25"),y=function(){var e=this,t=e._self._c;return t("ResourceTable",{attrs:{schema:null,rows:e.rows,headers:e.headers,search:!1,"table-actions":!1,namespaced:!0,"mangle-action-resources":e.getRealResources,"paging-label":"sortableTable.paging.generic",groupable:!1},scopedSlots:e._u([{key:"cell:state",fn:function({row:e}){return[e.real?t("BadgeState",{attrs:{value:e.real}}):t("BadgeState",{attrs:{value:e}})]}}])})},g=[],x=a("126f"),w=a("9c09"),k=a("462f"),_=a("1d19"),S=a("bcb3"),C=a("f17a"),N={components:{ResourceTable:x["a"],BadgeState:C["a"]},props:{value:{type:Object,required:!0},rel:{type:String,default:null},direction:{type:String,default:"to"},ignoreTypes:{type:Array,default:()=>[]}},data(){return{loadedResources:1}},computed:{filteredRelationships(){var e;let t=(null===(e=this.value)||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.relationships)||[];return t=t.filter(e=>{const t=e[this.direction+"Type"];return!(!t||this.ignoreTypes.includes(t))&&(!this.rel||e.rel===this.rel)}),t},rows(){if(this.loadedResources<1)return;const e=this.$store.getters["clusterId"],t=this.$store.getters["currentStore"](),a=[];for(const s of this.filteredRelationships){const i=s.state||"active",n=Object(w["b"])(i,s.error,s.transitioning),o=s[this.direction+"Type"],r=this.$store.getters[t+"/schemaFor"](o);let l=s[this.direction+"Id"];if(!l)continue;let c=null;const d=l.indexOf("/"),u=`${o}/${c}/${l}`;d>0&&(c=l.substr(0,d),l=l.substr(d+1));const p={name:`c-cluster-product-resource${c?"-namespace":""}-id`,params:{product:S["a"],cluster:"management"===t?"local":e,resource:o,namespace:c,id:l}};a.push({type:o,real:this.$store.getters[t+"/byId"](o,s[this.direction+"Id"]),id:s[this.direction+"Id"],state:i,metadata:{namespace:c,name:l},_key:u,name:l,namespace:c,nameDisplay:l,nameSort:Object(_["b"])(l).toLowerCase(),stateColor:n,detailLocation:p,typeDisplay:this.$store.getters["type-map/labelFor"](r),stateDisplay:Object(w["e"])(i),stateBackground:n.replace("text-","bg-"),groupByLabel:c})}return a},headers(){return[k["J"],k["P"],k["t"],k["u"]]}},methods:{async getRealResources(e){const t=this.$store.getters["currentStore"](),a=await Promise.allSettled(e.map(e=>this.$store.dispatch(t+"/find",{type:e.type,id:e.id}))),s=[];for(let i=0;i<a.length;i++)"fulfilled"===a[i].status&&s.push(a[i].value);return this.loadedResources++,s}}},$=N,O=Object(h["a"])($,y,g,!1,null,null,null),B=O.exports,T=a("7083"),A=a("1722"),E={name:"ResourceTabs",components:{Tabbed:n["a"],Tab:o["a"],Conditions:f,SortableTable:d["b"],RelatedResources:B},mixins:[r["a"]],props:{value:{type:Object,default:()=>({})},mode:{type:String,default:b["w"]},defaultTab:{type:String,default:null},needConditions:{type:Boolean,default:!0},needEvents:{type:Boolean,default:!0},needRelated:{type:Boolean,default:!0},extensionParams:{type:Object,default:null}},data(){const e=this.$store.getters["currentStore"](v["f"]);return{hasEvents:this.$store.getters[e+"/schemaFor"](v["f"]),allEvents:[],selectedTab:this.defaultTab,didLoadEvents:!1,extensionTabs:Object(A["a"])(this,T["c"].TAB,T["e"].RESOURCE_DETAIL,this.$route,this,this.extensionParams)}},beforeDestroy(){this.$store.dispatch("cluster/forgetType",v["f"])},computed:{showConditions(){const e=this.$store.getters["currentStore"](this.value.type);var t;return!!this.$store.getters[e+"/schemaFor"](this.value.type)&&(this.isView&&this.needConditions&&(null===(t=this.value)||void 0===t?void 0:t.type)&&this.$store.getters[e+"/pathExistsInSchema"](this.value.type,"status.conditions"))},showEvents(){return this.isView&&this.needEvents&&this.hasEvents},showRelated(){return this.isView&&this.needRelated},eventHeaders(){return[{name:"type",label:this.t("tableHeaders.type"),value:"eventType",sort:"eventType"},{name:"reason",label:this.t("tableHeaders.reason"),value:"reason",sort:"reason"},{name:"date",label:this.t("tableHeaders.updated"),value:"date",sort:"date:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125},{name:"message",label:this.t("tableHeaders.message"),value:"message",sort:"message"}]},events(){return this.allEvents.filter(e=>{var t,a;return(null===(t=e.involvedObject)||void 0===t?void 0:t.uid)===(null===(a=this.value)||void 0===a||null===(a=a.metadata)||void 0===a?void 0:a.uid)}).map(e=>({reason:`${e.reason||this.t("generic.unknown")}${e.count>1?` (${e.count})`:""}`.trim(),message:e.message||this.t("generic.unknown"),date:e.lastTimestamp||e.firstTimestamp||e.metadata.creationTimestamp,eventType:e.eventType}))},conditionsHaveIssues(){var e;return!!this.showConditions&&(null===(e=this.value.status)||void 0===e||null===(e=e.conditions)||void 0===e?void 0:e.filter(e=>!Object(w["d"])(e)).some(e=>e.error))}},methods:{tabChange(e){if(this.selectedTab=null===e||void 0===e?void 0:e.selectedName,!this.didLoadEvents&&"events"===this.selectedTab){const e=this.$store.getters["currentStore"](v["f"]);this.$store.dispatch(e+"/findAll",{type:v["f"]}).then(e=>{this.allEvents=e,this.didLoadEvents=!0})}}}},j=E,R=Object(h["a"])(j,s,i,!1,null,null,null);t["a"]=R.exports},c4d1:function(e,t,a){"use strict";a("3064")},cd81:function(e,t,a){var s=a("987b");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("7f93c3da",s,!0,{sourceMap:!1,shadowMode:!1})},d0e7:function(e,t){function a(e,t,a){var s=-1,i=e.length;t<0&&(t=-t>i?0:i+t),a=a>i?i:a,a<0&&(a+=i),i=t>a?0:a-t>>>0,t>>>=0;var n=Array(i);while(++s<i)n[s]=e[s+t];return n}e.exports=a},d389:function(e,t,a){var s=a("aa62");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("7e55611b",s,!0,{sourceMap:!1,shadowMode:!1})},d953:function(e,t,a){var s=a("21a1");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var i=a("0ed3").default;i("13d94c82",s,!0,{sourceMap:!1,shadowMode:!1})},df43:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".outer-container[data-v-38b74aec]{display:flex;flex-direction:column;flex:1;padding:0;justify-content:flex-start}.header[data-v-38b74aec]{display:flex;align-content:space-between;align-items:center;margin-bottom:20px;border-bottom:var(--header-border-size) solid var(--header-border)}.header .step-sequence[data-v-38b74aec],.header>.title[data-v-38b74aec]{flex:1;min-height:60px;display:flex}.header .step-sequence .steps[data-v-38b74aec]{flex:1;margin:0 30px;display:flex;justify-content:space-between;list-style-type:none;padding:0}.header .step-sequence .steps[data-v-38b74aec]:focus{outline:none;box-shadow:none}.header .step-sequence .steps li.step[data-v-38b74aec]{display:flex;flex-direction:row;flex-grow:1;align-items:center}.header .step-sequence .steps li.step>span>span[data-v-38b74aec]:last-of-type{padding-bottom:0}.header .step-sequence .steps li.step[data-v-38b74aec]:last-of-type{flex-grow:0}.header .step-sequence .steps li.step .controls[data-v-38b74aec]{display:flex;flex-direction:column;align-items:center;width:40px;overflow:visible;padding-top:7px}.header .step-sequence .steps li.step .controls>span[data-v-38b74aec]{padding-bottom:3px;margin-bottom:5px;white-space:nowrap}.header .step-sequence .steps li.step.active .controls[data-v-38b74aec]{color:var(--primary)}.header .step-sequence .steps li.step:not(.disabled) .controls:hover>*[data-v-38b74aec]{color:var(--primary)!important;cursor:pointer}.header .step-sequence .steps li.step:not(.active) .controls>*[data-v-38b74aec]{color:var(--input-disabled-text);text-decoration:none}.header .step-sequence .steps .divider[data-v-38b74aec]{flex-basis:100%;border-top:1px solid var(--border);position:relative;top:17px}.cru__content .header .step-sequence .steps .divider[data-v-38b74aec]{top:13px}.header .choice-banner[data-v-38b74aec]{flex-basis:40%;display:flex;align-items:center;margin-bottom:10px}.header .choice-banner.selected[data-v-38b74aec]{background-color:var(--accent-btn)}.header .choice-banner.top H2[data-v-38b74aec]{margin:0}.header .choice-banner.top .title[data-v-38b74aec]{display:flex;align-items:center;justify-content:space-evenly;position:relative}.header .choice-banner.top .title>.subtitle[data-v-38b74aec]{margin-right:20px}.header .choice-banner.top .subtitle[data-v-38b74aec]{display:flex;flex-direction:column}.header .choice-banner.top .subtitle .subtext[data-v-38b74aec]{color:var(--input-label)}.header .choice-banner[data-v-38b74aec]:not(.top){box-shadow:0 0 12px 3px var(--box-bg);flex-direction:row;align-items:center;justify-content:start}.header .choice-banner[data-v-38b74aec]:not(.top):hover{outline:var(--outline-width) solid var(--outline);cursor:pointer}.header .choice-banner .round-image[data-v-38b74aec]{min-width:50px;height:50px;margin:10px 10px 10px 0;border-radius:50%;overflow:hidden}.header .choice-banner .round-image .logo[data-v-38b74aec]{min-width:50px;height:50px}.step-container[data-v-38b74aec]{position:relative;flex:1 1 auto;height:0;overflow-y:auto;padding:20px 2px 2px 2px;display:flex;flex-direction:column}.step-container__step[data-v-38b74aec]{overflow:hidden;display:flex;flex-direction:column;flex:1}.controls-row[data-v-38b74aec]{margin-left:-20px;margin-right:-20px;padding:10px 20px;display:flex;justify-content:space-between;padding-top:10px;border-top:var(--header-border-size) solid var(--header-border);position:absolute;bottom:0;width:100%;background:var(--body-bg)}.controls-row .controls-steps .btn[data-v-38b74aec]{margin-left:10px}",""]),e.exports=t},dff5:function(e,t,a){"use strict";a("70e5")},e143:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var s=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("label",{class:{disabled:e.isDisabled,"radio-container":!0},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.clicked(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.clicked(t)}],click:function(t){return t.stopPropagation(),e.clicked(t)}}},[t("input",{attrs:{id:e._uid+"-radio",disabled:e.isDisabled,name:e.name,type:"radio",tabindex:-1},domProps:{value:""+e.val,checked:e.isChecked},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}}),t("span",{ref:"custom",class:[e.isDisabled?"text-muted":"","radio-custom"],attrs:{tabindex:e.isDisabled?-1:0,"aria-label":e.label,"aria-checked":e.isChecked,role:"radio"}}),t("div",{staticClass:"labeling"},[t("label",{class:[e.muteLabel?"text-muted":"","radio-label","m-0"],attrs:{for:e.name}},[e.hasLabelSlot?e._t("label"):e.label?t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.label,expression:"label"}]}):e._e()],2),e.descriptionKey||e.description?t("div",{staticClass:"radio-button-outer-container-description"},[e.descriptionKey?t("t",{attrs:{k:e.descriptionKey}}):e.description?[e._v(" "+e._s(e.description)+" ")]:e._e()],2):e.hasDescriptionSlot?t("div",{staticClass:"radio-button-outer-container-description"},[e._t("description")],2):e._e()])])},i=[],n=a("8bbf"),o=a.n(n),r=a("da25"),l=o.a.extend({props:{name:{type:String,default:""},val:{required:!0,validator:()=>!0},value:{required:!0,validator:()=>!0},label:{type:String,default:""},disabled:{type:Boolean,default:!1},mode:{type:String,default:"edit"},descriptionKey:{type:String,default:null},description:{type:String,default:null}},data(){return{isChecked:this.value===this.val}},computed:{isDisabled(){return this.mode===r["w"]||this.disabled},muteLabel(){return this.disabled&&!(this.mode===r["w"]&&this.isChecked)},hasDescriptionSlot(){return!!this.$slots.description},hasLabelSlot(){return!!this.$slots.label||!!this.$scopedSlots.label}},watch:{value(e){this.isChecked=this.val===e,this.isChecked&&this.$refs.custom.focus()}},methods:{clicked({target:e}){this.isDisabled||"A"===(null===e||void 0===e?void 0:e.tagName)||this.$emit("input",this.val)}}}),c=l,d=(a("928c"),a("d802")),u=Object(d["a"])(c,s,i,!1,null,null,null),p=u.exports,h=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.label||e.labelKey||e.tooltip||e.tooltipKey||e.$slots.label?t("div",{staticClass:"radio-group label"},[e._t("label",(function(){return[t("h3",[e.labelKey?t("t",{attrs:{k:e.labelKey}}):e.label?[e._v(" "+e._s(e.label)+" ")]:e._e(),e.tooltipKey?t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t(e.tooltipKey),expression:"t(tooltipKey)"}],staticClass:"icon icon-info icon-lg"}):e.tooltip?t("i",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.tooltip,expression:"tooltip"}],staticClass:"icon icon-info icon-lg"}):e._e()],2)]}))],2):e._e(),t("div",{staticClass:"radio-group",class:{row:e.row},attrs:{tabindex:"0"},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.stopPropagation(),e.clickNext(1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.stopPropagation(),e.clickNext(-1))}]}},e._l(e.normalizedOptions,(function(a,s){return t("div",{key:e.name+"-"+s},[e._t(s,(function(){return[t("RadioButton",e._g({key:e.name+"-"+s,attrs:{name:e.name,value:e.value,label:a.label,description:a.description,val:a.value,disabled:e.isDisabled,mode:e.mode}},e.$listeners))]}),{listeners:e.$listeners,option:a,isDisabled:e.isDisabled})],2)})),0)])},m=[],f=o.a.extend({components:{RadioButton:p},props:{name:{type:String,required:!0},options:{type:Array,required:!0},labels:{type:Array,default:null},value:{type:[Boolean,String,Object],default:null},disabled:{type:Boolean,default:!1},mode:{type:String,default:"edit"},label:{type:String,default:null},labelKey:{type:String,default:null},tooltip:{type:[String,Object],default:null},tooltipKey:{type:String,default:null},row:{type:Boolean,default:!1}},computed:{normalizedOptions(){const e=[];for(let t=0;t<this.options.length;t++){const a=this.options[t];"object"===typeof a&&a?e.push(a):this.labels?e.push({label:this.labels[t],value:a}):e.push({label:a,value:a})}return e},isView(){return this.mode===r["w"]},isDisabled(){return this.disabled||this.isView}},methods:{clickNext(e){const t=this.normalizedOptions,a=t.find(e=>e.value===this.value);let s=(a?t.indexOf(a):-1)+e;s>=t.length?s=t.length-1:s<0&&(s=0),this.$emit("input",t[s].value)}}}),v=f,b=(a("4296"),Object(d["a"])(v,h,m,!1,null,null,null)),y=b.exports},e92d:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".box[data-v-f06ff0c4],.title[data-v-f06ff0c4]{margin-bottom:10px}.box[data-v-f06ff0c4]{display:grid;grid-template-columns:auto 75px;align-items:center}.box .value[data-v-f06ff0c4]{flex:1}.box .value INPUT[data-v-f06ff0c4]{height:61px}.remove[data-v-f06ff0c4]{text-align:right}.footer .protip[data-v-f06ff0c4]{float:right;padding:5px 0}",""]),e.exports=t},f1a8:function(e,t,a){var s=a("5eaa");t=s(!1),t.push([e.i,".cru-resource-yaml-container .resource-yaml .yaml-editor[data-v-0b45cbfb]{min-height:100px}.create-resource-container .resource-container[data-v-0b45cbfb]{display:flex;flex-direction:column}.create-resource-container .subtype-banner .round-image[data-v-0b45cbfb]{background-color:var(--primary)}.title[data-v-0b45cbfb]{margin-top:20px}.title.with-description[data-v-0b45cbfb]{margin-top:0}.subtype-container[data-v-0b45cbfb]{position:relative;display:flex;height:100%}.subtype-body[data-v-0b45cbfb]{flex:1;padding:10px}.subtype-logo[data-v-0b45cbfb]{align-items:center;display:flex;justify-content:center;min-width:100px;min-height:100px;overflow:hidden;background-color:var(--box-bg)}.subtype-logo img[data-v-0b45cbfb]{width:56px;height:56px;-o-object-fit:contain;object-fit:contain;position:relative;top:2px}form.create-resource-container .cru__footer[data-v-0b45cbfb]{border-top:var(--header-border-size) solid var(--header-border)}.cru[data-v-0b45cbfb],.cru__form[data-v-0b45cbfb]{display:flex;flex-direction:column;flex-grow:1}.cru__content[data-v-0b45cbfb]{flex-grow:1}.cru__content-wizard[data-v-0b45cbfb]{display:flex}.cru__footer[data-v-0b45cbfb]{right:0;bottom:0;margin-left:-20px;margin-right:-20px;margin-bottom:-20px;padding:10px 20px}.cru__errors[data-v-0b45cbfb],.cru__footer[data-v-0b45cbfb]{position:sticky;background-color:var(--header-bg)}.cru__errors[data-v-0b45cbfb]{top:0;z-index:1;margin:10px 0}.description[data-v-0b45cbfb]{margin-bottom:15px;margin-top:5px}",""]),e.exports=t},f520:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("SortableTable",{attrs:{rows:e.statusRows,headers:e.statusHeaders,"table-actions":!1,"row-actions":!1,"key-field":"key","default-sort-by":"state"}})},i=[],n=a("462f"),o=a("0fb1"),r={components:{SortableTable:o["b"]},props:{resource:{type:Object,required:!0}},data(){const e=[n["P"],n["K"],n["p"],n["C"],n["r"]];return{statusRows:this.resource.status.conditions||[],statusHeaders:e}},methods:{clicked(e){e.stopPropagation(),e.preventDefault(),this.$copyText(this.$slots.default[0].text).then(()=>{this.copied=!0,setTimeout(()=>{this.copied=!1},2e3)})}}},l=r,c=a("d802"),d=Object(c["a"])(l,s,i,!1,null,null,null);t["a"]=d.exports},fd5f:function(e,t,a){"use strict";var s=function(){var e=this,t=e._self._c;return t("section",{staticClass:"cru"},[e._t("noticeBanner"),e.description?t("p",{staticClass:"description"},[e._v(" "+e._s(e.description)+" ")]):e._e(),t(e.isView?"div":"form",{tag:"form",staticClass:"create-resource-container cru__form",attrs:{"data-testid":"cru-form"},on:{submit:function(e){e.preventDefault()},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onPressEnter(t)}}},[e.hasErrors?t("div",{staticClass:"cru__errors",attrs:{id:"cru-errors"}},e._l(e.errors,(function(a,s){return t("Banner",{key:s,attrs:{color:"error",label:e.stringify(e.mappedErrors[a].message),icon:e.mappedErrors[a].icon,closable:!0},on:{close:function(t){return e.closeError(s)}}})})),1):e._e(),e.showSubtypeSelection?t("div",{staticClass:"subtypes-container cru__content"},[e._t("subtypes",(function(){return e._l(e.subtypes,(function(a){return t("div",{key:a.id,staticClass:"subtype-banner",class:{selected:a.id===e._selectedSubtype},on:{click:function(t){return e.selectType(a.id,t)}}},[e._t("subtype-content",(function(){return[t("div",{staticClass:"subtype-container"},[t("div",{staticClass:"subtype-logo"},[a.bannerImage?t("img",{attrs:{src:a.bannerImage,alt:(e.resource.type?e.resource.type+": ":"")+(a.label||"")}}):t("div",{staticClass:"round-image"},[a.bannerAbbrv?t("div",{staticClass:"banner-abbrv"},[e.$store.getters["i18n/exists"](a.bannerAbbrv)?t("span",[e._v(e._s(e.t(a.bannerAbbrv)))]):t("span",{style:{fontSize:e.abbrSizes[a.bannerAbbrv.length]}},[e._v(e._s(a.bannerAbbrv))])]):t("div",[e._v(" "+e._s(a.id.slice(0,1).toUpperCase())+" ")])])]),t("div",{staticClass:"subtype-body"},[t("div",{staticClass:"title",class:{"with-description":!!a.description}},[t("h5",[e.$store.getters["i18n/exists"](a.label)?t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t(a.label),expression:"t(subtype.label)"}]}):t("span",[e._v(e._s(a.label))])]),a.docLink?t("a",{staticClass:"flex-right",attrs:{href:a.docLink,target:"_blank",rel:"noopener nofollow"}},[e._v(e._s(e.t("generic.moreInfo"))+" "),t("i",{staticClass:"icon icon-external-link"})]):e._e()]),a.description?t("hr"):e._e(),a.description?t("div",{staticClass:"description"},[e.$store.getters["i18n/exists"](a.description)?t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t(a.description,{},!0),expression:"t(subtype.description, {}, true)"}]}):t("span",[e._v(e._s(a.description))])]):e._e()])])]}))],2)}))}),{subtypes:e.subtypes})],2):e._e(),e.showAsForm&&e.steps.length?[e._selectedSubtype||!e.subtypes.length?t("div",{staticClass:"resource-container cru__content cru__content-wizard"},[e.resource?t("Wizard",{ref:"Wizard",staticClass:"wizard",attrs:{"header-mode":e.mode,steps:e.steps,errors:e.errors,"finish-mode":e.finishMode},on:{error:t=>e.errors=t},scopedSlots:e._u([{key:"stepContainer",fn:function({activeStep:a}){return[e._l(e.steps,(function(s){return[s.name===a.name||s.hidden?t("div",{key:s.name,staticClass:"step-container__step",class:{hide:s.name!==a.name&&s.hidden}},[e._t(s.name,null,{step:s})],2):e._e()]}))]}},{key:"controlsContainer",fn:function({showPrevious:a,next:s,back:i,activeStep:n,canNext:o,activeStepIndex:r,visibleSteps:l}){return[[t("CruResourceFooter",{staticClass:"cru__footer",attrs:{mode:e.mode,"is-form":e.showAsForm,"show-cancel":e.showCancel},on:{"cancel-confirmed":e.confirmCancel},scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,a){return{key:a,fn:function(t){return[e._t(a,null,null,t)]}}}))],null,!0)},[t("div",{staticClass:"controls-steps"},[e.showYaml?t("button",{staticClass:"btn role-secondary",attrs:{type:"button"},on:{click:e.showPreviewYaml}},[t("t",{attrs:{k:"cruResource.previewYaml"}})],1):e._e(),a?[t("button",{staticClass:"btn role-secondary",attrs:{type:"button"},on:{click:function(e){return i()}}},[t("t",{attrs:{k:"wizard.previous"}})],1)]:e._e(),r===l.length-1?[e.showSubtypeSelection||e.isView?e._e():t("AsyncButton",{ref:"save",attrs:{disabled:!n.ready,mode:e.finishButtonMode||e.mode},on:{click:function(t){return e.$emit("finish",t)}}})]:[t("button",{staticClass:"btn role-primary",attrs:{disabled:!o,type:"button"},on:{click:function(e){return s()}}},[t("t",{attrs:{k:"wizard.next"}})],1)]],2)])]]}}],null,!0)}):e._e()],1):e._e()]:e.showAsForm?[e._selectedSubtype||!e.subtypes.length?t("div",{staticClass:"resource-container cru__content",style:[e.minHeight?{"min-height":e.minHeight}:{}]},[e._t("default")],2):e._e(),e._t("form-footer",(function(){return[t("CruResourceFooter",{staticClass:"cru__footer",attrs:{mode:e.mode,"is-form":e.showAsForm,"show-cancel":e.showCancel,"component-testid":e.componentTestid},on:{"cancel-confirmed":e.confirmCancel},scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,a){return{key:a,fn:function(t){return[e._t(a,null,null,t)]}}})),{key:"default",fn:function(){return[e.isView?e._e():t("div",[e.showYaml?t("button",{staticClass:"btn role-secondary",attrs:{"data-testid":e.componentTestid+"-yaml",type:"button"},on:{click:e.showPreviewYaml}},[t("t",{attrs:{k:"cruResource.previewYaml"}})],1):e._e(),e.showSubtypeSelection?e._e():t("AsyncButton",{ref:"save",attrs:{disabled:!e.canSave,mode:e.finishButtonMode||e.mode,"data-testid":e.componentTestid+"-save"},on:{click:function(t){return e.clickSave(t)}}})],1)]},proxy:!0}],null,!0)})]}))]:e.showYaml?t("section",{staticClass:"cru-resource-yaml-container resource-container cru__content"},[t("ResourceYaml",{ref:"resourceyaml",staticClass:"resource-container cru__content",attrs:{value:e.resource,mode:e.mode,"initial-yaml-for-diff":e.initialYaml,yaml:e.resourceYaml,"offer-preview":e.isEdit,"done-route":e.doneRoute,"done-override":e.resource.doneOverride,errors:e.errors,"apply-hooks":e.applyHooks},on:{error:t=>e.$emit("error",t)},scopedSlots:e._u([{key:"yamlFooter",fn:function({yamlSave:a,showPreview:s,yamlPreview:i,yamlUnpreview:n}){return[e._t("cru-yaml-footer",(function(){return[t("CruResourceFooter",{staticClass:"cru__footer",attrs:{"done-route":e.doneRoute,mode:e.mode,"is-form":e.showAsForm},on:{"cancel-confirmed":e.confirmCancel},scopedSlots:e._u([{key:"default",fn:function({checkCancel:o}){return[t("div",{staticClass:"controls-middle"},[s?t("button",{staticClass:"btn role-secondary",attrs:{type:"button","data-testid":e.componentTestid+"-yaml-yaml"},on:{click:n}},[t("t",{attrs:{k:"resourceYaml.buttons.continue"}})],1):e._e(),!s&&e.isEdit?t("button",{staticClass:"btn role-secondary",attrs:{"data-testid":e.componentTestid+"-yaml-yaml-preview",disabled:!e.canDiff,type:"button"},on:{click:i}},[t("t",{attrs:{k:"resourceYaml.buttons.diff"}})],1):e._e()]),e._selectedSubtype||!e.subtypes.length?t("div",{staticClass:"controls-right"},[t("button",{staticClass:"btn role-secondary",attrs:{"data-testid":e.componentTestid+"-yaml-cancel",type:"button"},on:{click:function(e){return o(!1)}}},[t("t",{attrs:{k:"cruResource.backToForm"}})],1),e.showSubtypeSelection?e._e():t("AsyncButton",{attrs:{"data-testid":e.componentTestid+"-yaml-save",disabled:!e.canSave,"action-label":e.isEdit?e.t("generic.save"):e.t("generic.create")},on:{click:e=>a(e)}})],1):e._e()]}}],null,!0)})]}))]}}],null,!0)})],1):e._e()],2)],2)},i=[],n=a("330a"),o=a.n(n),r=a("c5e6"),l=a("e24b"),c=a("907c"),d=a("ac07"),u=a("6418"),p=a("d709"),h=a("9ce4"),m=a("3e9d"),f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cru-resource-footer"},[e._t("footer-prefix"),e._t("cancel",(function(){return[!e.isView&&e.showCancel?t("button",{staticClass:"btn role-secondary",attrs:{id:"cru-cancel","data-testid":e.componentTestid+"-cancel",type:"button"},on:{click:function(t){e.confirmCancelRequired?e.checkCancel(!0):e.$emit("cancel-confirmed",!0)}}},[t("t",{attrs:{k:"generic.cancel"}})],1):e._e()]})),e._t("default",(function(){return[e.isView?e._e():t("AsyncButton",{attrs:{"data-testid":e.componentTestid+"-create",mode:e.finishButtonMode||e.mode},on:{click:function(t){return e.$emit("finish",t)}}})]}),{checkCancel:e.checkCancel}),t("ResourceCancelModal",{ref:"cancelModal",attrs:{"is-cancel-modal":e.isCancelModal,"is-form":e.isForm},on:{"confirm-cancel":function(t){return e.confirmCancel(t)}}})],2)},v=[],b=function(){var e=this,t=e._self._c;return t("modal",{staticClass:"confirm-modal",attrs:{name:"cancel-modal",width:440,height:"auto"}},[t("div",{staticClass:"header"},[t("h4",{staticClass:"text-default-text"},[e.isCancelModal?t("t",{attrs:{k:"generic.cancel"}}):t("span",[e._v(e._s(e.t("cruResource.backToForm")))])],1)]),t("div",{staticClass:"body"},[e.isCancelModal?t("p",[t("t",{attrs:{k:"cruResource.cancelBody"}})],1):t("p",[t("t",{attrs:{k:"cruResource.backBody"}})],1)]),t("div",{staticClass:"footer"},[t("button",{staticClass:"btn role-secondary",attrs:{type:"button"},on:{click:e.cancelCancel}},[e._v(" "+e._s(e.isForm?e.t("cruResource.reviewForm"):e.t("cruResource.reviewYaml"))+" ")]),t("button",{staticClass:"btn role-primary",attrs:{type:"button"},on:{click:e.confirmCancel}},[e.isCancelModal?t("span",[e._v(e._s(e.t("cruResource.confirmCancel")))]):t("span",[e._v(e._s(e.t("cruResource.confirmBack")))])])])])},y=[],g={props:{isCancelModal:{type:Boolean,default:!1},isForm:{type:Boolean,default:!1}},watch:{},methods:{show(){this.$modal.show("cancel-modal")},cancelCancel(){this.$modal.hide("cancel-modal"),this.$emit("cancel-cancel")},confirmCancel(){this.$modal.hide("cancel-modal"),this.$emit("confirm-cancel",this.isCancelModal)}}},x=g,w=(a("25b9"),a("d802")),k=Object(w["a"])(x,b,y,!1,null,"7090e1b4",null),_=k.exports,S=a("da25"),C={components:{AsyncButton:p["b"],ResourceCancelModal:_},props:{mode:{type:String,default:"create"},isForm:{type:Boolean,default:!0},finishButtonMode:{type:String,default:null},confirmCancelRequired:{type:Boolean,default:!1},confirmBackRequired:{type:Boolean,default:!0},showCancel:{type:Boolean,default:!0},componentTestid:{type:String,default:"form-footer"}},data(){return{isCancelModal:!1}},computed:{...Object(h["a"])({t:"i18n/t"}),isView(){return this.mode===S["w"]}},methods:{checkCancel(e){this.isCancelModal=!!e,this.$refs.cancelModal.show()},confirmCancel(e){this.$emit("cancel-confirmed",e)}}},N=C,$=(a("a5bd"),Object(w["a"])(N,f,v,!1,null,null,null)),O=$.exports,B=a("842c"),T=function(){var e=this,t=e._self._c;return t("div",{staticClass:"outer-container"},[e.stepsLoaded?e._e():t("Loading",{attrs:{mode:"relative"}}),t("div",{staticClass:"outer-container",class:{hide:!e.stepsLoaded}},[t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[e.showBanner?t("div",{staticClass:"top choice-banner"},[e.bannerImage||e.bannerTitle?e._t("bannerTitle",(function(){return[t("div",{directives:[{name:"show",rawName:"v-show",value:e.initialTitle||e.activeStepIndex>0,expression:"initialTitle || activeStepIndex > 0"}],staticClass:"title"},[e._t("bannerTitleImage",(function(){return[e.bannerImage?t("div",{staticClass:"round-image"},[t("LazyImage",{staticClass:"logo",attrs:{src:e.bannerImage}})],1):e._e()]})),t("div",{staticClass:"subtitle"},[e.bannerTitle?t("h2",[e._v(" "+e._s(e.bannerTitle)+" ")]):e._e(),e.bannerTitleSubtext?t("span",{staticClass:"subtext"},[e._v(e._s(e.bannerTitleSubtext))]):e._e()])],2)]})):e._e(),e.activeStep&&e.showSteps?t("div",{staticClass:"subtitle"},[t("h2",[e._v(e._s(e.headerMode?e.t("wizard."+e.headerMode):e.t(`asyncButton.${e.finishMode}.action`))+": "+e._s(e.t("wizard.step",{number:e.activeStepIndex+1})))]),e._t("bannerSubtext",(function(){return[null!==e.activeStep.subtext?t("span",{staticClass:"subtext"},[e._v(e._s(e.activeStep.subtext||e.activeStep.label))]):e._e()]}))],2):e._e()],2):e._e(),t("div",{staticClass:"step-sequence"},[e.showSteps?t("ul",{staticClass:"steps",attrs:{tabindex:"0"},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:(t.stopPropagation(),e.selectNext(1))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:(t.stopPropagation(),e.selectNext(-1))}]}},[e._l(e.visibleSteps,(function(a,s){return[t("li",{key:a.name+"li",class:{step:!0,active:a.name===e.activeStep.name,disabled:!e.isAvailable(a)},attrs:{id:a.name,role:"presentation"}},[t("span",{staticClass:"controls",attrs:{"aria-controls":"step"+s+1,"aria-selected":a.name===e.activeStep.name,role:"tab"},on:{click:function(t){return t.preventDefault(),e.goToStep(s+1,!0)}}},[t("span",{staticClass:"icon icon-lg",class:{"icon-dot":a.name===e.activeStep.name,"icon-dot-open":a.name!==e.activeStep.name}}),t("span",[e._v(" "+e._s(a.label)+" ")])])]),s!==e.visibleSteps.length-1?t("div",{key:a.name,staticClass:"divider"}):e._e()]}))],2):e._e()])])]),e._t("stepContainer",(function(){return[e._l(e.steps,(function(a){return[a.name===e.activeStep.name||a.hidden?t("div",{key:a.name,staticClass:"step-container__step",class:{hide:a.name!==e.activeStep.name&&a.hidden}},[e._t(a.name,null,{step:a})],2):e._e()]}))]}),{activeStep:e.activeStep}),e._t("controlsContainer",(function(){return[e._l(e.errorStrings,(function(a,s){return t("div",{key:s},[t("Banner",{attrs:{color:"error",label:a,closable:!0},on:{close:function(t){return e.errors.splice(s,1)}}})],1)})),t("div",{staticClass:"controls-row pt-20",attrs:{id:"wizard-footer-controls"}},[e._t("cancel",(function(){return[t("button",{staticClass:"btn role-secondary",attrs:{type:"button"},on:{click:e.cancel}},[t("t",{attrs:{k:"generic.cancel"}})],1)]}),{cancel:e.cancel}),t("div",{staticClass:"controls-steps"},[e.showPrevious?e._t("back",(function(){return[t("button",{staticClass:"btn role-secondary",attrs:{disabled:!e.canPrevious||!e.editFirstStep&&1===e.activeStepIndex,type:"button"},on:{click:function(t){return e.back()}}},[t("t",{attrs:{k:"wizard.previous"}})],1)]}),{back:e.back}):e._e(),e.activeStepIndex===e.visibleSteps.length-1?e._t("finish",(function(){return[t("AsyncButton",{attrs:{disabled:!e.activeStep.ready,mode:e.finishMode},on:{click:e.finish}})]}),{finish:e.finish}):e._t("next",(function(){return[t("button",{class:e.nextButtonStyle,attrs:{disabled:!e.canNext,type:"button"},on:{click:function(t){return e.next()}}},[t("t",{attrs:{k:e.nextButtonLabel}})],1)]}),{next:e.next})],2)],2)]}),{showPrevious:e.showPrevious,next:e.next,back:e.back,canNext:e.canNext,activeStepIndex:e.activeStepIndex,visibleSteps:e.visibleSteps,errorStrings:e.errorStrings,finish:e.finish,cancel:e.cancel,activeStep:e.activeStep})],2)],1)},A=[],E=a("15ca"),j={name:"Wizard",components:{AsyncButton:p["b"],Banner:u["a"],Loading:E["a"]},props:{steps:{type:Array,required:!0},initStepIndex:{type:Number,default:0},editFirstStep:{type:Boolean,default:!1},showBanner:{type:Boolean,default:!0},initialTitle:{type:Boolean,default:!0},bannerTitle:{type:String,default:null},bannerImage:{type:String,default:null},bannerTitleSubtext:{type:String,default:null},headerMode:{type:String,default:null},finishMode:{type:String,default:"finish"},errors:{type:Array,default:null}},data(){return{activeStep:null}},computed:{errorStrings(){return(this.errors||[]).map(e=>Object(m["c"])(e))},activeStepIndex(){return this.visibleSteps.findIndex(e=>e.name===this.activeStep.name)},showPrevious(){if(0===this.activeStepIndex)return!1;for(let e=0;e<this.activeStepIndex;e++){const t=this.visibleSteps[e];if(!t)break;if(!t.hidden)return!0}return!1},canPrevious(){var e;return!(null!==(e=this.activeStep)&&void 0!==e&&null!==(e=e.previousButton)&&void 0!==e&&e.disable)&&(this.activeStepIndex>1||this.editFirstStep)},canNext(){return this.activeStepIndex<this.visibleSteps.length-1&&this.activeStep.ready},readySteps(){return this.visibleSteps.filter(e=>e.ready)},showSteps(){return!1!==this.activeStep.showSteps&&this.visibleSteps.length>1},stepsLoaded(){return!this.steps.some(e=>!0===e.loading)},visibleSteps(){return this.steps.filter(e=>!e.hidden)},nextButtonStyle(){var e;return(null===(e=this.activeStep.nextButton)||void 0===e?void 0:e.style)||"btn role-primary"},nextButtonLabel(){var e;return(null===(e=this.activeStep.nextButton)||void 0===e?void 0:e.labelKey)||"wizard.next"}},watch:{stepsLoaded(e,t){!t&&e&&(this.activeStep=this.visibleSteps[this.initStepIndex],this.goToStep(this.activeStepIndex+1))}},created(){this.activeStep=this.visibleSteps[this.initStepIndex],this.goToStep(this.activeStepIndex+1)},methods:{goToStep(e,t){if(e<1)return;if(!this.editFirstStep&&1===e&&t)return;const a=this.visibleSteps[e-1];a&&(this.isAvailable(a)||1===e)&&(this.activeStep=a,this.$emit("next",{step:a}))},cancel(){this.$emit("cancel")},finish(e){this.$emit("finish",e)},next(){this.goToStep(this.activeStepIndex+2)},back(){this.goToStep(this.activeStepIndex)},isAvailable(e){if(!e)return!1;const t=this.visibleSteps.findIndex(t=>t.name===e.name);if(0===t&&!this.editFirstStep)return!1;for(let a=0;a<t;a++)if(!1===this.visibleSteps[a].ready)return!1;return!0}}},R=j,M=(a("7881"),Object(w["a"])(R,T,A,!1,null,"38b74aec",null)),L=M.exports;const F="show-preview-yaml";var D={name:"CruResource",components:{AsyncButton:p["b"],Banner:u["a"],CruResourceFooter:O,ResourceYaml:d["a"],Wizard:L},props:{doneRoute:{type:[String,Object],default:null},cancelEvent:{type:Boolean,default:!1},showCancel:{type:Boolean,default:!0},mode:{type:String,required:!0},resource:{type:Object,required:!0},subtypes:{type:Array,default:()=>[]},selectedSubtype:{type:String,default:null},validationPassed:{type:Boolean,default:!0},errors:{type:Array,default:()=>[]},errorsMap:{type:Object,default:null},canYaml:{type:Boolean,default:!0},generateYaml:{type:Function,default:null},finishButtonMode:{type:String,default:null},preventEnterSubmit:{type:Boolean,default:!1},applyHooks:{type:Function,default:null},steps:{type:Array,default:()=>[]},finishMode:{type:String,default:"finish"},minHeight:{type:String,default:""},namespaceKey:{type:String,default:"metadata.namespace"},componentTestid:{type:String,default:"form"},description:{type:String,default:""},yamlModifiers:{type:Object,default:void 0}},data(e){const t=this.createResourceYaml();return this.$on("createNamespace",e=>{this.createNamespace=e}),{isCancelModal:!1,createNamespace:!1,showAsForm:this.$route.query[S["a"]]!==S["x"],resourceYaml:t,initialYaml:t,abbrSizes:{3:"24px",4:"18px",5:"16px",6:"14px"}}},computed:{canSave(){const{validationPassed:e,showAsForm:t,steps:a}=this;return t&&null!==a&&void 0!==a&&a.length?e&&this.steps.every(e=>e.ready):!this.showAsForm||this.validationPassed},canDiff(){return this.initialYaml!==this.resourceYaml},canEditYaml(){var e;const t=this.$store.getters["currentStore"](this.resource),a=this.$store.getters[t+"/schemaFor"](this.resource.type);return!(null!==a&&void 0!==a&&null!==(e=a.resourceMethods)&&void 0!==e&&e.includes("blocked-PUT"))},showYaml(){return this.canYaml&&(this._selectedSubtype||!this.subtypes.length)&&this.canEditYaml&&this.mode!==S["w"]},isView(){return this.mode===S["w"]},isEdit(){return this.mode===S["p"]},_selectedSubtype(){return this.selectedSubtype?this.selectedSubtype:this.$route.query[S["i"]]},showSubtypeSelection(){return!o()(this.subtypes)&&!this._selectedSubtype},...Object(h["a"])({t:"i18n/t"}),hasErrors(){var e;return(null===(e=this.errors)||void 0===e?void 0:e.length)&&Array.isArray(this.errors)},mappedErrors(){return this.errors?this.errorsMap||this.errors.reduce((e,t)=>({...e,[t]:{message:t,icon:null}}),{}):{}}},created(){this._selectedSubtype&&this.$emit("select-type",this._selectedSubtype)},methods:{stringify:m["c"],confirmCancel(e=!0){e?this.emitOrRoute():this.showAsForm||(this.resourceYaml=null,this.showAsForm=!0,this.$router.applyQuery({[S["a"]]:S["v"]}))},closeError(e){const t=this.errors.filter((t,a)=>a!==e);this.$emit("error",t,this.errors[e])},emitOrRoute(){if(this.cancelEvent)this.$emit("cancel");else{const{resource:e=this.resource.type}=this.$route.params,t=this.resource.doneOverride,a={name:this.doneRoute,params:{resource:e}};this.$router.replace(t||a)}},createResourceYaml(e){const t=this.resource;if("function"===typeof this.generateYaml)return this.generateYaml.apply(this,t);{const a=this.$store.getters["currentStore"](t),s=this.$store.getters[a+"/all"](c["A"]),i=Object(l["e"])(t),n=Object(r["c"])(s,t.type,i,e);return n}},async showPreviewYaml(){this.applyHooks&&await this.applyHooks(B["b"],F);const e=this.createResourceYaml(this.yamlModifiers);this.resourceYaml=e,this.showAsForm=!1,this.$router.applyQuery({[S["a"]]:S["x"]})},selectType(e,t){var a;"A"!==(null===t||void 0===t||null===(a=t.srcElement)||void 0===a?void 0:a.tagName)&&(this.$router.applyQuery({[S["i"]]:e}),this.$emit("select-type",e))},async clickSave(e){try{await this.createNamespaceIfNeeded(),this.$emit("finish",e)}catch(t){this.$emit("error",Object(m["b"])(t.message)),e(!1)}},save(){this.$refs.save.clicked()},async createNamespaceIfNeeded(){const e=this.$store.getters["currentStore"](this.resource),t=Object(l["g"])(this.resource,this.namespaceKey);let a=!1;if(this.createNamespace){try{a=!!await this.$store.dispatch(e+"/find",{type:c["p"],id:t})}catch{}if(this.createNamespace&&!a)try{const a=await this.$store.dispatch(e+"/createNamespace",{name:t},{root:!0});a.applyDefaults(),await a.save()}catch(s){throw this.$emit("error",Object(m["b"])(s)),new Error("Could not create the new namespace. "+s.message)}}},onPressEnter(e){this.preventEnterSubmit&&e.preventDefault()}}},P=D,V=(a("0838"),Object(w["a"])(P,s,i,!1,null,"0b45cbfb",null));t["a"]=V.exports}}]);
//# sourceMappingURL=harvester-ift-0.1.0.umd.min.vendors~edit.js.map